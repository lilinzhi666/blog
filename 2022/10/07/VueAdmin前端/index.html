<!DOCTYPE HTML>
<html lang="zh_CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="VueAdmin前端, lilinzhi">
    <meta name="description" content="">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>VueAdmin前端 | lilinzhi</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery.min.js"></script>

<meta name="generator" content="Hexo 6.2.0"><link rel="alternate" href="/atom.xml" title="lilinzhi" type="application/atom+xml">
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">lilinzhi</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>index</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>tags</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>Categories</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>Archives</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>About</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>Contact</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/music" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>music</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="Search" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">lilinzhi</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			index
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			tags
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			Categories
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			Archives
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			About
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			Contact
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/music" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			music
		</a>
          
        </li>
        
        
        <li><div class="divider"></div></li>
        <li>
            <a href="https://github.com/blinkfox/hexo-theme-matery" class="waves-effect waves-light" target="_blank">
                <i class="fab fa-github-square fa-fw"></i>Fork Me
            </a>
        </li>
        
    </ul>
</div>


        </div>

        
            <style>
    .nav-transparent .github-corner {
        display: none !important;
    }

    .github-corner {
        position: absolute;
        z-index: 10;
        top: 0;
        right: 0;
        border: 0;
        transform: scale(1.1);
    }

    .github-corner svg {
        color: #0f9d58;
        fill: #fff;
        height: 64px;
        width: 64px;
    }

    .github-corner:hover .octo-arm {
        animation: a 0.56s ease-in-out;
    }

    .github-corner .octo-arm {
        animation: none;
    }

    @keyframes a {
        0%,
        to {
            transform: rotate(0);
        }
        20%,
        60% {
            transform: rotate(-25deg);
        }
        40%,
        80% {
            transform: rotate(10deg);
        }
    }
</style>

<a href="https://github.com/blinkfox/hexo-theme-matery" class="github-corner tooltipped hide-on-med-and-down" target="_blank"
   data-tooltip="Fork Me" data-position="left" data-delay="50">
    <svg viewBox="0 0 250 250" aria-hidden="true">
        <path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path>
        <path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2"
              fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path>
        <path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z"
              fill="currentColor" class="octo-body"></path>
    </svg>
</a>
        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/medias/featureimages/21.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">VueAdmin前端</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="post-container content">

    
    <link rel="stylesheet" href="/libs/tocbot/tocbot.css">
<style>
    #articleContent h1::before,
    #articleContent h2::before,
    #articleContent h3::before,
    #articleContent h4::before,
    #articleContent h5::before,
    #articleContent h6::before {
        display: block;
        content: " ";
        height: 100px;
        margin-top: -100px;
        visibility: hidden;
    }

    #articleContent :focus {
        outline: none;
    }

    .toc-fixed {
        position: fixed;
        top: 64px;
    }

    .toc-widget {
        width: 345px;
        padding-left: 20px;
    }

    .toc-widget .toc-title {
        padding: 35px 0 15px 17px;
        font-size: 1.5rem;
        font-weight: bold;
        line-height: 1.5rem;
    }

    .toc-widget ol {
        padding: 0;
        list-style: none;
    }

    #toc-content {
        padding-bottom: 30px;
        overflow: auto;
    }

    #toc-content ol {
        padding-left: 10px;
    }

    #toc-content ol li {
        padding-left: 10px;
    }

    #toc-content .toc-link:hover {
        color: #42b983;
        font-weight: 700;
        text-decoration: underline;
    }

    #toc-content .toc-link::before {
        background-color: transparent;
        max-height: 25px;

        position: absolute;
        right: 23.5vw;
        display: block;
    }

    #toc-content .is-active-link {
        color: #42b983;
    }

    #floating-toc-btn {
        position: fixed;
        right: 15px;
        bottom: 76px;
        padding-top: 15px;
        margin-bottom: 0;
        z-index: 998;
    }

    #floating-toc-btn .btn-floating {
        width: 48px;
        height: 48px;
    }

    #floating-toc-btn .btn-floating i {
        line-height: 48px;
        font-size: 1.4rem;
    }
</style>
<div class="row">
    <div id="main-content" class="col s12 m12 l9">
        <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/VueAdmin%E5%89%8D%E7%AB%AF/">
                                <span class="chip bg-color">VueAdmin前端</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>Publish Date:&nbsp;&nbsp;
                    2022-10-07
                </div>
                

                

                

                

                
            </div>
        </div>
        <hr class="clearfix">

        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="开发SpringBoot-Jwt-Vue的前后端分离后台管理系统VueAdmin-前端笔记"><a href="#开发SpringBoot-Jwt-Vue的前后端分离后台管理系统VueAdmin-前端笔记" class="headerlink" title="开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记"></a>开发SpringBoot+Jwt+Vue的前后端分离后台管理系统VueAdmin - 前端笔记</h1><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/2">社长 </a>1年前 ⋅ 54017 阅读</p>
<p>一个spring security + jwt + vue的前后端分离项目！综合运用！</p>
<p>关注公众号 MarkerHub，回复【 <strong>VueAdmin</strong> 】可以加群讨论学习、另外还会不定时安排B站视频直播答疑！</p>
<hr>
<blockquote>
<p>首发公众号：MarkerHub</p>
<p>作者：吕一明</p>
<p>视频讲解：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1af4y1s7Wh/">https://www.bilibili.com/video/BV1af4y1s7Wh/</a></p>
<p>线上演示：<a target="_blank" rel="noopener" href="https://www.markerhub.com/vueadmin/">https://www.markerhub.com/vueadmin/</a></p>
<p>转载请保留此应用，万分感谢！</p>
</blockquote>
<h2 id="1-前言"><a href="#1-前言" class="headerlink" title="1. 前言"></a>1. 前言</h2><p>在之前，我写了一个前后端分离的简易<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1PQ4y1P7hZ/?fileGuid=HXqVy6jx8qkWKPJq">博客系统vueblog</a>，在B站也已经收获了13万的播放量了，也还算受欢迎吧，感谢大家的认同与支持！同时有些刚入门的同学还是说有些地方不清楚，跟着做的时候还是会出现错误，或者不理解为啥这样处理，这次我更详细点。</p>
<p>而接下来，我们即将开发一个前后端分离的后台管理系统<a target="_blank" rel="noopener" href="https://www.markerhub.com/vueadmin/">VueAdmin</a>。这个管理系统与我们之前的博客系统技术选型上其实有很多相似之处，只不过权限框架我选用了spring security，然后相对来说权限模块开发就多点代码，也仅此而已了。对了前端的系统界面也是我们一步步开发的，所以希望能帮助大家熟悉一个后台管理系统，也希望大家学到东西哈。</p>
<p>我的公众号MarkerHub，希望大家能关注支持我哈！</p>
<h2 id="2-安装vue环境，并新建Vue项目"><a href="#2-安装vue环境，并新建Vue项目" class="headerlink" title="2. 安装vue环境，并新建Vue项目"></a>2. 安装vue环境，并新建Vue项目</h2><p>前端我们依然选择的是Vue+ElementUI的组合，主要还是因为这个主流呀。针对Vue，如果还不熟悉的同学，建议去看看这个视频【<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV125411W73W/?fileGuid=HXqVy6jx8qkWKPJq">4个小时带你快速入门vue</a>】，我也是学这个视频入门的，就学了半天，哈哈。主要Js基础扎实点学起来挺快的。</p>
<p>首先我们安装vue的环境，我实践的环境是windows 10哈。</p>
<p>1、首先我们上node.js官网(<a target="_blank" rel="noopener" href="https://nodejs.org/zh-cn/?fileGuid=HXqVy6jx8qkWKPJq">https://nodejs.org/zh-cn/</a>)，下载最新的长期版本，直接运行安装完成之后，我们就已经具备了node和npm的环境啦。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/054c315f93334390ad411c5f4038fe4a.png" alt="图片"></p>
<p>安装完成之后检查下版本信息：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/6e0b14343ad840619adefd463c040f73.png" alt="图片"></p>
<p>这就表示你已经安装成功啦，牛逼开始的第一步！</p>
<p>2、接下来，我们安装vue的环境</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 安装淘宝npm</span><br><span class="line">npm install -g cnpm --registry=https://registry.npm.taobao.org</span><br><span class="line"># vue-cli 安装依赖包</span><br><span class="line">cnpm install --g vue-cli</span><br><span class="line"># 打开vue的可视化管理工具界面</span><br><span class="line">vue ui</span><br></pre></td></tr></table></figure>

<p>上面我们分别安装了淘宝npm，cnpm是为了提高我们安装依赖的速度。vue ui是<a target="_blank" rel="noopener" href="https://github.com/vue">@vue</a>&#x2F;cli3.0增加一个可视化项目管理工具，可以运行项目、打包项目，检查等操作。对于初学者来说，可以少记一些命令，哈哈。<br>3、创建vueadmin-vue项目</p>
<p>运行vue ui之后，</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/594344581ce34fbb99f30f7d9c136fcd.png" alt="图片"></p>
<p>会为我们打开一个<a target="_blank" rel="noopener" href="http://localhost:8080/">http://localhost:8080</a> 的页面：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/46aa173f32f04e65aa6594b5d1ad3da0.png" alt="图片"></p>
<p>我们将在这个页面完成我们的前端Vue项目的新建。然后切换到【创建】，注意创建的目录最好是和你运行vue ui同一级。这样方便管理和切换。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/3c913e6167e94bdbab49ac42c4e461cf.png" alt="图片"></p>
<p>然后点击按钮【在此创建新项目】下一步中，项目文件夹中输入项目名称“vueblog-vue”，其他不用改。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/f9e037d1eb054383a50f5012f4047698.png" alt="图片"></p>
<p>点击下一步，选择【手动】，再点击下一步，如图点击按钮，勾选上路由Router、状态管理Vuex，去掉js的校验。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/f3221f0464fb4635ae5e706916cd03d0.png" alt="图片"></p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/c6ee8d9cfd994a709908289480f0ee7b.png" alt="图片"></p>
<p>下一步中，也选上【Use history mode for router】，点击创建项目，然后弹窗中选择按钮【创建项目，不保存预设】，就进入项目创建啦。</p>
<p>稍等片刻之后，项目就初始化完成了。上面的步骤中，我们创建了一个vue项目，并且安装了Router、Vuex。这样我们后面就可以直接使用。</p>
<ul>
<li><strong>Router：</strong> WebApp的链接路径管理系统，简单就是建立起url和页面之间的映射关系</li>
<li><strong>Vuex：</strong> 一个专为 Vue.js 应用程序开发的<code>状态管理模式</code>，简单来说就是为了方便数据的操作而建立的一个临时” 前端数据库“，用于各个组件间共享和检测数据变化。</li>
</ul>
<p>ok，我们使用IDEA导入项目，看看创建好的项目长啥样子：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/0c6901a867474027a12082098ddc0f18.png" alt="图片"></p>
<p>当然了，IDEA我们要预先先安装好一个Vue插件，这样我们就可以使用IDEA像WebStorm一样开发Vue项目啦，毕竟都是同一个家族出品的哈哈。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/47b9ecfa900347cd8199b51aae5f0369.png" alt="图片"></p>
<p>然后我们在IDEA窗口的底部打开Terminal命令行窗口，输入npm run serve运行vue项目，我们就可以通过<a target="_blank" rel="noopener" href="http://localhost:8080/?fileGuid=HXqVy6jx8qkWKPJq">http://localhost:8080/</a>打开我们的项目了。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/4e9f8fcb4eb34b12887f8759acca83cb.png" alt="图片"></p>
<p>效果如下，Hello Vue！</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/2ef2f52f5472431c8b79dc34cba0c644.png" alt="图片"></p>
<p>线上演示：<a target="_blank" rel="noopener" href="https://www.markerhub.com/vueadmin/">https://www.markerhub.com/vueadmin/</a></p>
<h2 id="3-安装element-ui"><a href="#3-安装element-ui" class="headerlink" title="3. 安装element-ui"></a>3. 安装element-ui</h2><p>接下来我们引入element-ui组件（<a target="_blank" rel="noopener" href="https://element.eleme.cn/#/zh-CN/component/installation?fileGuid=HXqVy6jx8qkWKPJq">https://element.eleme.cn</a>），这样我们就可以获得好看的vue组件，开发好看的后台管理系统的界面啦。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/f0bfb7d234cd4d93bd3434fbe17aaeae.png" alt="图片"></p>
<p>命令很简单：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 切换到项目根目录</span><br><span class="line">cd vueadmin-vue</span><br><span class="line"># 或者直接在idea中执行下面命令</span><br><span class="line"># 安装element-ui</span><br><span class="line">cnpm install element-ui --save</span><br></pre></td></tr></table></figure>

<p>然后我们打开项目src目录下的main.js，引入element-ui依赖。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">import Element from &#x27;element-ui&#x27;</span><br><span class="line">import &quot;element-ui/lib/theme-chalk/index.css&quot;</span><br><span class="line">Vue.use(Element)</span><br></pre></td></tr></table></figure>

<p>这样我们就可以愉快得在官网上选择组件复制代码到我们项目中直接使用啦。</p>
<h2 id="4-安装axios、qs、mockjs"><a href="#4-安装axios、qs、mockjs" class="headerlink" title="4. 安装axios、qs、mockjs"></a>4. 安装axios、qs、mockjs</h2><ul>
<li><strong>axios</strong>：一个基于 promise 的 HTTP 库，类ajax</li>
<li><strong>qs</strong>：查询参数序列化和解析库</li>
<li><strong>mockjs</strong>：为我们生成随机数据的工具库</li>
</ul>
<p>接下来，我们来安装axios（<a target="_blank" rel="noopener" href="http://www.axios-js.com/?fileGuid=HXqVy6jx8qkWKPJq">http://www.axios-js.com/</a>），axios是一个基于 promise 的 HTTP 库，这样我们进行前后端对接的时候，使用这个工具可以提高我们的开发效率。</p>
<p>安装命令：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install axios --save</span><br></pre></td></tr></table></figure>

<p>然后同样我们在main.js中全局引入axios。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">Vue.prototype.$axios = axios //</span><br></pre></td></tr></table></figure>

<p>组件中，我们就可以通过this.$axios.get()来发起我们的请求了哈。当然了，后面我们添加axios拦截的时候我们需要修改引入的编写。<br>同时，我们同步安装一个qs，什么是qs？qs是一个流行的查询参数序列化和解析库。可以将一个普通的object序列化成一个查询字符串，或者反过来将一个查询字符串解析成一个object,帮助我们查询字符串解析和序列化字符串。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install qs --save</span><br></pre></td></tr></table></figure>

<p>然后因为后台我们现在还没有搭建，无法与前端完成数据交互，因此我们这里需要mock数据，因此我们引入mockjs（<a target="_blank" rel="noopener" href="http://mockjs.com/?fileGuid=HXqVy6jx8qkWKPJq">http://mockjs.com/</a>），方便后续我们提供api返回数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cnpm install mockjs --save-dev</span><br></pre></td></tr></table></figure>

<p>然后我们在src目录下新建mock.js文件，用于编写随机数据的api，然后我们需要在main.js中引入这个文件：</p>
<ul>
<li><p>src&#x2F;main.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">require(&quot;./mock&quot;) //引入mock数据，关闭则注释该行</span><br></pre></td></tr></table></figure>

<p>后面我们mackjs会自动为我们拦截ajax，并自动匹配路径返回数据！</p>
<h2 id="5-页面路由"><a href="#5-页面路由" class="headerlink" title="5. 页面路由"></a>5. 页面路由</h2></li>
</ul>
<p>接下来，在开发页面之前我们需要先定义路由。传统项目开发，我们都是通过链接到达控制器然后再到页面渲染的。而类似于Vue这样的前后端分离性质的框架，我们是先访问页面，然后再异步加载数据渲染。而在Vue中，路由的管理是有个专门的组件叫Router管理的。</p>
<p>我们在新建项目的时候也提了一下，大家还记得吧。我们当时说：</p>
<ul>
<li><strong>Router</strong>：WebApp的链接路径管理系统，简单就是建立起url和页面之间的映射关系</li>
</ul>
<p>所以我们要打开页面然后开发页面，我们需要先配置路由，然后再开发，这样我们可以试试看到效果。项目中，src\router\index.js就是用来配置路由的。</p>
<p>我们在views文件夹下定义几个页面：</p>
<ul>
<li>Login.vue（登录页面）</li>
<li>Index.vue（首页）</li>
</ul>
<p>我们新建Vue页面的时候可以这样新建：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/a79e365a5b484d0dbaa1c7e307f61eee.png" alt="图片"></p>
<p>然后再路由中心配置配置url与vue页面的映射关系，参考原本的默认写法，我们很容易写出以下代码：</p>
<ul>
<li><p>src\router\index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import VueRouter from &#x27;vue-router&#x27;</span><br><span class="line">import Login from &quot;../views/Login&quot;;</span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line">const routes = [</span><br><span class="line">&#123;</span><br><span class="line">  path: &#x27;/index&#x27;,</span><br><span class="line">  name: &#x27;Index&#x27;,</span><br><span class="line">  component: () =&gt; import(&#x27;../views/Index.vue&#x27;)</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  path: &#x27;/login&#x27;,</span><br><span class="line">  name: &#x27;Login&#x27;,</span><br><span class="line">  component: Login</span><br><span class="line">&#125;</span><br><span class="line">]</span><br><span class="line">const router = new VueRouter(&#123;</span><br><span class="line">mode: &#x27;history&#x27;,</span><br><span class="line">base: process.env.BASE_URL,</span><br><span class="line">routes</span><br><span class="line">&#125;)</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>

<p>得到效果如下：</p>
</li>
</ul>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/0442a0c0f5f6481c8dafe54e6994b131.png" alt="图片"></p>
<p>通过npm run serve运行项目，打开<a target="_blank" rel="noopener" href="http://localhost:8080/login?fileGuid=HXqVy6jx8qkWKPJq">http://localhost:8080/login</a>发现页面长这样，明显我们新建的Login.vue里面是没有内容的，但这里有个Home|About，明显是被其他地方嵌套过来的，这是啥原因呢？</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/091eb86b20b1487296376bb37cfd3428.png" alt="图片"></p>
<p>这里解释一下，我们新建的Vue项目，如果没其他配置，那么默认的就是一个单页面应用，也就是说这个应用是由一个外壳页面和多个页面片段组成的，页面跳转的时候其实始终都没有离开外壳页面，替换的只是加载的页面片段而已。</p>
<p>那么对应到我们的vueadmin项目，外壳页面就是App.vue，片段页面就是Login.vue，所以我们刚刚通过&#x2F;login链接看到的页面效果就是App.vue+Login.vue的结果。所以我们进入App.vue页面看看：</p>
<ul>
<li>src&#x2F;App.vue</li>
</ul>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/b6a2d12ed1594dd5a86c704270614ac4.png" alt="图片"></p>
<p>果然我们在template标签中找到了相关的html，我们把id为nav的这个div直接删除不要了。这个<router-view/>在这里就是现实我们链接到的片段页面，也就是Login.vue。所以这样就清晰了，我们输入url的时候会调整到App.vue，然后路由会匹配到我们对应的vue页面，这样完成的页面就渲染出来了。</p>
<p>然后我们再调整一下全局的样式，具体代码如下：</p>
<ul>
<li>src&#x2F;App.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">      &lt;router-view/&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">   html, body, #app &#123;</span><br><span class="line">      font-family: &#x27;Helvetica Neue&#x27;, &#x27;Hiragino Sans GB&#x27;, &#x27;WenQuanYi Micro Hei&#x27;, &#x27;Microsoft Yahei&#x27;, sans-serif;</span><br><span class="line">      height: 100%;</span><br><span class="line">      padding: 0;</span><br><span class="line">      margin: 0;</span><br><span class="line">      font-size: 15px;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-登陆界面开发"><a href="#6-登陆界面开发" class="headerlink" title="6. 登陆界面开发"></a>6. 登陆界面开发</h2><p>ok，万事具备，接下来我们来开发我们第一个页面Login.vue（<a target="_blank" rel="noopener" href="http://localhost:8080/login?fileGuid=HXqVy6jx8qkWKPJq">http://localhost:8080/login</a>），目前页面是完全空白的。一般登录页面就一个简单的表单：用户名、登录密码和验证码。然后我还想在表单左边添加一个图片，是我自己的公众号的二维码，然后中间用一条竖线分开。</p>
<p>一开始的时候为了页面风格的统一，我们采用了Element Ui的组件库，所以这里我们就直接去element的官网。上面描述中我们需要左右分开显示，所以先找到Loyout布局然后再弄表单，然后我们涉及到的后台交互有2个：</p>
<ul>
<li>获取登录验证码</li>
<li>提交登录表单完成登录</li>
</ul>
<p>因为后台系统我们暂时还没有开发，所以这里我们需要自己mock数据完成交互。前面我们已经引入了mockjs，所以我们到mock.js文件中开发我们的api。</p>
<h4 id="登录交互过程"><a href="#登录交互过程" class="headerlink" title="登录交互过程"></a>登录交互过程</h4><p>我们梳理一下交互流程：</p>
<ol>
<li>浏览器打开登录页面</li>
<li>动态加载登录验证码，因为这是前后端分离的项目，我们不再使用session进行交互，所以后端我打算禁用session，那么验证码的验证就是问题了，所以后端设计上我打算生成验证码同时生成一个随机码，随机码作为key，验证码为value保存到redis中，然后把随机码和验证码图片的Base64字符串码发送到前端</li>
<li>前端提交用户名、密码、验证码还有随机码</li>
<li>后台验证验证码是否匹配以及密码是否正确</li>
</ol>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/4463b9e5c4f14f6b9eb566f8e39c3838.png" alt="图片"></p>
<p>ok，这样我们就知道mock应该弄成什么样的api了。</p>
<ul>
<li>mock.js - 获取登录验证码</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">// 引入mockjs</span><br><span class="line">const Mock = require(&#x27;mockjs&#x27;)</span><br><span class="line">// 获取 mock.Random 对象</span><br><span class="line">// 参考：https://github.com/nuysoft/Mock/wiki/Mock.Random</span><br><span class="line">const Random = Mock.Random</span><br><span class="line">let Result = &#123;</span><br><span class="line">   code: 200,</span><br><span class="line">   msg: &#x27;操作成功&#x27;,</span><br><span class="line">   data: null</span><br><span class="line">&#125;</span><br><span class="line">/**</span><br><span class="line"> * Mock.mock( url, post/get , function(options))；</span><br><span class="line"> * url 表示需要拦截的 URL，</span><br><span class="line"> * post/get 需要拦截的 Ajax 请求类型</span><br><span class="line"> *</span><br><span class="line"> * 用于生成响应数据的函数</span><br><span class="line"> */</span><br><span class="line">// 获取验证码图片base64编码以及一个随机码</span><br><span class="line">Mock.mock(&#x27;/captcha&#x27;, &#x27;get&#x27;, () =&gt; &#123;</span><br><span class="line">   Result.data = &#123;</span><br><span class="line">      token: Random.string(32), // 获取一个32位的随机字符串,</span><br><span class="line">      captchaImg: Random.dataImage( &quot;120x40&quot;, &quot;11111&quot; ) //生成验证码为11111的base64图片编码</span><br><span class="line">   &#125;</span><br><span class="line">   return Result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>mock生成数据还算简单，一般都是利用Mock.Random对象来生成一些随机数据，具体的用法可以参考<a target="_blank" rel="noopener" href="https://github.com/nuysoft/Mock/wiki/Mock.Random%E3%80%82%E7%84%B6%E5%90%8EResult%E6%98%AF%E4%B8%BA%E4%BA%86%E7%BB%9F%E4%B8%80%E8%BF%94%E5%9B%9E%E7%BB%93%E6%9E%9C%EF%BC%8C%E5%9B%A0%E4%B8%BA%E5%90%8E%E5%8F%B0%E8%AE%BE%E8%AE%A1%E7%9A%84%E6%97%B6%E5%80%99%EF%BC%8C%E5%89%8D%E5%90%8E%E7%AB%AF%E4%BA%A4%E4%BA%92%EF%BC%8C%E4%B8%80%E8%88%AC%E9%83%BD%E6%9C%89%E5%9B%BA%E5%AE%9A%E7%9A%84%E8%BF%94%E5%9B%9E%E6%A0%BC%E5%BC%8F%EF%BC%8C%E6%89%80%E4%BB%A5%E5%B0%B1%E6%9C%89%E4%BA%86Result%E3%80%82">https://github.com/nuysoft/Mock/wiki/Mock.Random。然后Result是为了统一返回结果，因为后台设计的时候，前后端交互，一般都有固定的返回格式，所以就有了Result。</a></p>
<ul>
<li>mock.js - 登录接口</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 因为mock不认识/login?username=xxx，所以用了正则表达式</span><br><span class="line">Mock.mock(RegExp(&#x27;/login*&#x27;), &#x27;post&#x27;, (config) =&gt; &#123;</span><br><span class="line">   // 这里无法在header添加authorization，直接跳过</span><br><span class="line">   console.log(&quot;mock----------------login&quot;)</span><br><span class="line">   return Result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Mock我们不需要什么处理，只需要放回的数据符合前端的要求就行哈。这样我们前端就可以继续往后面开发。</p>
<p>然后编写登录页面的js</p>
<ul>
<li>src&#x2F;views&#x2F;Login.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;el-row type=&quot;flex&quot; class=&quot;row-bg&quot; justify=&quot;center&quot;&gt;</span><br><span class="line">      &lt;el-col :xl=&quot;6&quot; :lg=&quot;7&quot;&gt;</span><br><span class="line">         &lt;div class=&quot;login-form&quot;&gt;</span><br><span class="line">            &lt;h2&gt;欢迎来到VueAdmin管理系统&lt;/h2&gt;</span><br><span class="line">            &lt;el-image</span><br><span class="line">                  style=&quot;width: 180px; height: 180px&quot;</span><br><span class="line">                  :src=&quot;require(&#x27;@/assets/markerhub/MarkerHub.jpg&#x27;)&quot;</span><br><span class="line">            &gt;&lt;/el-image&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">               公众号 MarkerHub</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">            &lt;p&gt;</span><br><span class="line">               扫码二维码，回复【VueAdmin】获取登录密码</span><br><span class="line">            &lt;/p&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :span=&quot;1&quot;&gt;</span><br><span class="line">         &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">      &lt;el-col :xl=&quot;6&quot; :lg=&quot;7&quot;&gt;</span><br><span class="line">         &lt;el-form label-position=&quot;right&quot; :rules=&quot;rules&quot; label-width=&quot;80px&quot; :model=&quot;loginForm&quot; ref=&quot;loginForm&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;用户名&quot; prop=&quot;username&quot; style=&quot;width: 380px;&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;loginForm.username&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;密码&quot; prop=&quot;password&quot; style=&quot;width: 380px;&quot;&gt;</span><br><span class="line">               &lt;el-input type=&quot;password&quot; v-model=&quot;loginForm.password&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;验证码&quot; prop=&quot;code&quot; style=&quot;width: 380px;&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;loginForm.code&quot; style=&quot;width: 172px; float: left;&quot; maxlength=&quot;5&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">               &lt;el-image class=&quot;captchaImg&quot; :src=&quot;captchaImg&quot; @click=&quot;getCaptcha&quot;&gt;&lt;/el-image&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item&gt;</span><br><span class="line">               &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm(&#x27;loginForm&#x27;)&quot;&gt;提交&lt;/el-button&gt;</span><br><span class="line">               &lt;el-button @click=&quot;getPass&quot;&gt;获取密码&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br><span class="line">      &lt;/el-col&gt;</span><br><span class="line">   &lt;/el-row&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   import qs from &#x27;qs&#x27;</span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;Login&quot;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         return &#123;</span><br><span class="line">            loginForm: &#123;</span><br><span class="line">               username: &#x27;admin&#x27;,</span><br><span class="line">               password: &#x27;markerhub&#x27;,</span><br><span class="line">               code: &#x27;11111&#x27;,</span><br><span class="line">               token: &#x27;&#x27;,</span><br><span class="line">            &#125;,</span><br><span class="line">            rules: &#123;</span><br><span class="line">               username: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入用户名&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               password: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入密码&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               code: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入验证码&#x27;, trigger: &#x27;blur&#x27;&#125;,</span><br><span class="line">                  &#123;min: 5, max: 5, message: &#x27;验证码为5个字符&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">            &#125;,</span><br><span class="line">            captchaImg: &#x27;&#x27;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">         submitForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].validate((valid) =&gt; &#123;</span><br><span class="line">               if (valid) &#123;</span><br><span class="line">                  this.$axios.post(&#x27;/login?&#x27; + qs.stringify(this.loginForm)).then(res =&gt; &#123;</span><br><span class="line">                     console.log(res.data)</span><br><span class="line">                     const jwt = res.headers[&#x27;authorization&#x27;]</span><br><span class="line">                     // 将jwt存储到应用store中</span><br><span class="line">                     this.$store.commit(&quot;SET_TOKEN&quot;, jwt)</span><br><span class="line">                     this.$router.push(&quot;/index&quot;)</span><br><span class="line">                  &#125;).catch(error =&gt; &#123;</span><br><span class="line">                     this.getCaptcha();</span><br><span class="line">                     console.log(&#x27;error submit!!&#x27;);</span><br><span class="line">                  &#125;)</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                  this.getCaptcha();</span><br><span class="line">                  console.log(&#x27;error submit!!&#x27;);</span><br><span class="line">                  return false;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;,</span><br><span class="line">         resetForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].resetFields();</span><br><span class="line">         &#125;,</span><br><span class="line">         getPass() &#123;</span><br><span class="line">            this.$message(&quot;请扫描左边的二维码，回复【VueAdmin】获取登录密码&quot;);</span><br><span class="line">         &#125;,</span><br><span class="line">         getCaptcha() &#123;</span><br><span class="line">            this.$axios.get(&#x27;/captcha&#x27;).then(res =&gt; &#123;</span><br><span class="line">               this.loginForm.token = res.data.data.token</span><br><span class="line">               this.captchaImg = res.data.data.captchaImg</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">         this.getCaptcha()</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">   .el-col &#123;</span><br><span class="line">      display: flex;</span><br><span class="line">      justify-content: center;</span><br><span class="line">      align-items: center;</span><br><span class="line">      height: 100%;</span><br><span class="line">      text-align: center;</span><br><span class="line">   &#125;</span><br><span class="line">   .el-row &#123;</span><br><span class="line">      height: 100%;</span><br><span class="line">      background-color: #fafafa;</span><br><span class="line">   &#125;</span><br><span class="line">   .el-divider &#123;</span><br><span class="line">      height: 200px;</span><br><span class="line">   &#125;</span><br><span class="line">   .captchaImg &#123;</span><br><span class="line">      float: left;</span><br><span class="line">      margin-left: 8px;</span><br><span class="line">      border-radius: 4px;</span><br><span class="line">   &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>配合一点样式的调整，这样登录界面我们就开发完毕啦，如果觉得不清楚，可以去看开发视频哈，一步一步的教学，写文字毕竟讲述还是不够仔细的。</p>
<h4 id="token的状态同步"><a href="#token的状态同步" class="headerlink" title="token的状态同步"></a>token的状态同步</h4><p>再讲一下，submitForm方法中，提交表单之后做了几个动作，从Header中获取用户的authorization，也就是含有用户登录信息的jwt，然后提交到store中进行状态管理。this.$store.commit(“SET_TOKEN”, jwt)表示调用store中的SET_TOKEN方法，所以我们需要在store中编写方法：</p>
<ul>
<li>src&#x2F;store&#x2F;index.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    token: &#x27;&#x27;</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    SET_TOKEN: (state, token) =&gt; &#123;</span><br><span class="line">      state.token = token</span><br><span class="line">      localStorage.setItem(&quot;token&quot;, token)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  modules: &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这样登录之后获取到的jwt就可以存储到应用的store以及<strong>localStorage</strong>中，方便使用直接从<strong>localStorage</strong>中获取即可！<br>这样用户登录成功之后就会跳转到&#x2F;index页面this.$router.push(“&#x2F;index”)。</p>
<h4 id="定义全局axios拦截器"><a href="#定义全局axios拦截器" class="headerlink" title="定义全局axios拦截器"></a>定义全局axios拦截器</h4><p>这里有个问题，那么如果登录失败，我们是需要弹窗显示错误的，比如验证码错误，用户名或密码不正确等。不仅仅是这个登录接口，所有的接口调用都会有这个情况，所以我们想做个拦截器，对返回的结果进行分析，如果是异常就直接弹窗显示错误，这样我们就省得每个接口都写一遍了。</p>
<p>在src目录下创建一个文件axios.js（与main.js同级），定义axios的拦截：</p>
<ul>
<li>src&#x2F;axios.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import Element from &#x27;element-ui&#x27;</span><br><span class="line">import router from &quot;./router&quot;;</span><br><span class="line">axios.defaults.baseURL = &quot;http://localhost:8081&quot;</span><br><span class="line">const request = axios.create(&#123;</span><br><span class="line">   timeout: 5000,</span><br><span class="line">   headers: &#123;</span><br><span class="line">      &#x27;Content-Type&#x27;: &#x27;application/json; charset=utf-8&#x27;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br><span class="line">request.interceptors.request.use(config =&gt; &#123;</span><br><span class="line">   config.headers[&#x27;Authorization&#x27;] = localStorage.getItem(&quot;token&quot;) // 请求头带上token</span><br><span class="line">   return config</span><br><span class="line">&#125;)</span><br><span class="line">request.interceptors.response.use(response =&gt; &#123;</span><br><span class="line">      let res = response.data;</span><br><span class="line">      console.log(&quot;response&quot;)</span><br><span class="line">      console.log(res)</span><br><span class="line">      if (res.code === 200) &#123;</span><br><span class="line">         return response</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">         Element.Message.error(res.msg? res.msg : &#x27;系统异常！&#x27;, &#123;duration: 3 * 1000&#125;)</span><br><span class="line">         return Promise.reject(response.data.msg)</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   error =&gt; &#123;</span><br><span class="line">      console.log(error)</span><br><span class="line">      if(error.response.data) &#123;</span><br><span class="line">         error.message = error.response.data.msg</span><br><span class="line">      &#125;</span><br><span class="line">      if(error.response.status === 401) &#123;</span><br><span class="line">         router.push(&quot;/login&quot;)</span><br><span class="line">      &#125;</span><br><span class="line">      Element.Message.error(error.message, &#123;duration: 3 * 1000&#125;)</span><br><span class="line">      return Promise.reject(error)</span><br><span class="line">   &#125;</span><br><span class="line">)</span><br><span class="line">export default request</span><br></pre></td></tr></table></figure>

<p>前置拦截，其实可以统一为所有需要权限的请求装配上header的token信息，后置拦截中，判断status.code和error.response.status，如果是401未登录没权限的就调到登录页面，其他的就直接弹窗显示错误。<br>然后再main.js中导入axios.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import request from &quot;./axios&quot;;</span><br><span class="line">Vue.prototype.$axios = request</span><br></pre></td></tr></table></figure>

<p>同时，记得去掉我们之前添加的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">import axios from &#x27;axios&#x27;</span><br><span class="line">Vue.prototype.$axios = axios //</span><br></pre></td></tr></table></figure>

<p>这样axios每次请求都会被前置拦截器和后置拦截器拦截了。<br>登录异常弹窗效果如下：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/87e1201ca5ce43079f123b658d16ff56.png" alt="图片"></p>
<h2 id="7-后台管理界面开发"><a href="#7-后台管理界面开发" class="headerlink" title="7. 后台管理界面开发"></a>7. 后台管理界面开发</h2><p>ok，登录界面我们已经开发完毕，并且我们已经能够进入管理系统的首页了，接下来我们就来开发首页的页面。</p>
<p>一般来说，管理系统的页面我们都是头部是一个简单的信息展示系统名称和登录用户信息，然后中间的左边是菜单导航栏，右边是内容，对应到elementui的组件中，我们可以找到这个Container 布局容器用于布局，方便快速搭建页面的基本结构。</p>
<p>而我们采用这个布局：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/82b3e8f7ec5b4e7cb9f21953f4da1795.png" alt="图片"></p>
<p>而这个页面，一般来说Header和Aside都是不会变化的，只有Main部分会跟着链接变化而变化，所以我们可以提炼公共部分出来，放在Home.vue中，然后Main部分放在Index.vue中，</p>
<p>那么问题来了，我们如何才能做到点击左边的Aside，然后局部刷新Main中的内容呢？在Vue中，我们可以通过嵌套路由（子路由）的形式。也就是我们需要重新定义路由，一级路由是Home.vue，Index.vue是作为Home.vue页面的子路由，然后Home.vue中我们通过<router-view>来展示Index.vue的内容即可。</p>
<p>在router中，我们这样修改：</p>
<ul>
<li>src&#x2F;router&#x2F;index.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">const routes = [</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/&#x27;,</span><br><span class="line">    name: &#x27;Home&#x27;,</span><br><span class="line">    component: Home,</span><br><span class="line">    children: [</span><br><span class="line">      &#123;</span><br><span class="line">        path: &#x27;/index&#x27;,</span><br><span class="line">        name: &#x27;Index&#x27;,</span><br><span class="line">        meta: &#123;</span><br><span class="line">          title: &quot;首页&quot;</span><br><span class="line">        &#125;,</span><br><span class="line">        component: () =&gt; import(&#x27;@/views/Index.vue&#x27;)</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  &#123;</span><br><span class="line">    path: &#x27;/login&#x27;,</span><br><span class="line">    name: &#x27;Login&#x27;,</span><br><span class="line">    component: Login</span><br><span class="line">  &#125;,</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>可以看到原本的Index已经作为了Home的children，所以在链接到&#x2F;index的时候我们会展示父级Home的内容，然后再显示Index内容。</p>
<ul>
<li>src&#x2F;views&#x2F;Home.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;el-container&gt;</span><br><span class="line">      &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">         &lt;div&gt;菜单栏&lt;/div&gt;</span><br><span class="line">      &lt;/el-aside&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">         &lt;el-header style=&quot;height: 55px;&quot;&gt;</span><br><span class="line">            &lt;Strong&gt;ManHub后台管理系统&lt;/Strong&gt;</span><br><span class="line">            &lt;div class=&quot;header-avatar block&quot;&gt;</span><br><span class="line">               &lt;el-avatar class=&quot;el-avatar&quot; size=&quot;medium&quot; :src=&quot;userInfo.avatar&quot;&gt;&lt;/el-avatar&gt;</span><br><span class="line">               &lt;el-dropdown&gt;</span><br><span class="line">                      &lt;span class=&quot;el-dropdown-link&quot;&gt;</span><br><span class="line">                        &#123;&#123;userInfo.username&#125;&#125;&lt;i class=&quot;el-icon-arrow-down el-icon--right&quot;&gt;&lt;/i&gt;</span><br><span class="line">                      &lt;/span&gt;</span><br><span class="line">                  &lt;el-dropdown-menu slot=&quot;dropdown&quot;&gt;</span><br><span class="line">                     &lt;el-dropdown-item :underline=&quot;false&quot;&gt;</span><br><span class="line">                        &lt;router-link :to=&quot;&#123;name: &#x27;UserCenter&#x27;&#125;&quot;&gt;个人中心&lt;/router-link&gt;</span><br><span class="line">                     &lt;/el-dropdown-item&gt;</span><br><span class="line">                     &lt;el-dropdown-item @click.native=&quot;logout&quot;&gt;退出&lt;/el-dropdown-item&gt;</span><br><span class="line">                  &lt;/el-dropdown-menu&gt;</span><br><span class="line">               &lt;/el-dropdown&gt;</span><br><span class="line">               &lt;el-link href=&quot;https://space.bilibili.com/13491144&quot;&gt;视频讲解&lt;/el-link&gt;</span><br><span class="line">               &lt;el-link href=&quot;http://markerhub.com&quot;&gt;网站&lt;/el-link&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">         &lt;/el-header&gt;</span><br><span class="line">         &lt;el-main&gt;</span><br><span class="line"></span><br><span class="line">            &lt;div style=&quot;margin: 0 15px;&quot;&gt;</span><br><span class="line">               &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">         &lt;/el-main&gt;</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">   &lt;/el-container&gt;</span><br><span class="line"></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;Home.vue&quot;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         return &#123;</span><br><span class="line">            userInfo: &#123;</span><br><span class="line">               id: &#x27;-1&#x27;,</span><br><span class="line">               username: &#x27;admin&#x27;,</span><br><span class="line">               avatar: &#x27;https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>样式部分我就不贴出来了，看git上的代码哈。<br>首页中间内容，不知道放啥，就放我的公众号二维码吧，哈哈，欢迎关注关注！</p>
<ul>
<li>src&#x2F;views&#x2F;Index.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div style=&quot;text-align: center;&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&lt;/h2&gt;</span><br><span class="line">      &lt;el-image</span><br><span class="line">            style=&quot;width: 180px; height: 180px&quot;</span><br><span class="line">            :src=&quot;require(&#x27;@/assets/markerhub/javacat.jpg&#x27;)&quot;</span><br><span class="line">      &gt;&lt;/el-image&gt;</span><br><span class="line">      &lt;p&gt;</span><br><span class="line">         更多项目学习，扫描关注公众号！</span><br><span class="line">      &lt;/p&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>总体下来效果如下：<br><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/d9c4b269285e430c8540af5ca965edf3.png" alt="图片"></p>
<p>有点感觉了，然后昨天的菜单栏我们也弄下，我们找到NavMenu 导航菜单组件，然后加到Home.vue中，因为考虑到后面我们需要做动态菜单，所以我想单独这个页面出来，因此我新建了个SideMenu.vue：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-menu</span><br><span class="line">            class=&quot;el-menu-vertical-demo&quot;</span><br><span class="line">            background-color=&quot;#545c64&quot;</span><br><span class="line">            text-color=&quot;#fff&quot;</span><br><span class="line">            active-text-color=&quot;#ffd04b&quot;</span><br><span class="line">    &gt;</span><br><span class="line">        &lt;router-link to=&quot;/index&quot;&gt;</span><br><span class="line">            &lt;el-menu-item index=&quot;Index&quot;&gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;el-icon-s-home&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;span slot=&quot;title&quot;&gt;首页&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/router-link&gt;</span><br><span class="line">        &lt;el-submenu index=&quot;1&quot;&gt;</span><br><span class="line">            &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-s-operation&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;span&gt;系统管理&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">            &lt;el-menu-item index=&quot;1-1&quot;&gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;el-icon-s-custom&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;span slot=&quot;title&quot;&gt;用户管理&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-menu-item&gt;</span><br><span class="line">            &lt;el-menu-item index=&quot;1-2&quot;&gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;el-icon-rank&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;span slot=&quot;title&quot;&gt;角色管理&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-menu-item&gt;</span><br><span class="line">            &lt;el-menu-item index=&quot;1-3&quot;&gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;el-icon-menu&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;span slot=&quot;title&quot;&gt;菜单管理&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/el-submenu&gt;</span><br><span class="line">        &lt;el-submenu index=&quot;2&quot;&gt;</span><br><span class="line">            &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                &lt;i class=&quot;el-icon-s-tools&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;span&gt;系统工具&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">            &lt;el-menu-item index=&quot;2-2&quot;&gt;</span><br><span class="line">                &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                    &lt;i class=&quot;el-icon-s-order&quot;&gt;&lt;/i&gt;</span><br><span class="line">                    &lt;span slot=&quot;title&quot;&gt;数字字典&lt;/span&gt;</span><br><span class="line">                &lt;/template&gt;</span><br><span class="line">            &lt;/el-menu-item&gt;</span><br><span class="line">        &lt;/el-submenu&gt;</span><br><span class="line">    &lt;/el-menu&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;SideMenu&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">    .el-menu-vertical-demo &#123;</span><br><span class="line">        height: 100%;</span><br><span class="line">    &#125;</span><br><span class="line">    a&#123;</span><br><span class="line">        text-decoration:none;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>SideMenu.vue作为一个组件添加到Home.vue中，我们首选需要导入，然后声明compoents，然后才能使用标签，所以在Home.vue中代码如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;el-container&gt;</span><br><span class="line">      &lt;el-aside width=&quot;200px&quot;&gt;</span><br><span class="line">         &lt;SideMenu&gt;&lt;/SideMenu&gt;</span><br><span class="line">      &lt;/el-aside&gt;</span><br><span class="line">      &lt;el-container&gt;</span><br><span class="line">        ...</span><br><span class="line">      &lt;/el-container&gt;</span><br><span class="line">   &lt;/el-container&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   import SideMenu from &quot;./inc/SideMenu&quot;;</span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;Home.vue&quot;,</span><br><span class="line">      components: &#123;</span><br><span class="line">         SideMenu</span><br><span class="line">      &#125;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         ...</span><br><span class="line">      &#125;,</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>注意SideMenu出现的地方哈，最后效果如下：<br><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/028e4b63b8594949b2736e3046fa4198.png" alt="图片"></p>
<p>这就很接近我们想要的效果了哈。</p>
<p>我们先来新建几个页面，先在views下新建文件夹sys，然后再新建vue页面，具体看下面，这样我们就能把链接和页面可以连接起来。</p>
<ul>
<li>src\views\sys<ul>
<li>Dict.vue 数字字典</li>
<li>Menu.vue 菜单管理</li>
<li>Role.vue 角色管理</li>
<li>User.vue 用户管理</li>
</ul>
</li>
</ul>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/ea5fc230191e4bc2911cb1c9056712ab.png" alt="图片"></p>
<p>虽然建立了页面，但是因为我们没有在router中注册链接与组件的关系，所以我们现在打开链接还是打开不了页面的。下面我们就要动态联系起来。</p>
<h2 id="8-用户登录信息展示"><a href="#8-用户登录信息展示" class="headerlink" title="8. 用户登录信息展示"></a>8. 用户登录信息展示</h2><p>管理界面的右上角的用户信息现在是写死的，因为我们现在已经登录成功，所以我们可以通过接口去请求获取到当前的用户信息了，这样我们就可以动态显示用户的信息，这个接口比较简单，然后退出登录的链接也一起完成，就请求接口同时把浏览器中的缓存删除就退出了哈。</p>
<ul>
<li>src\views\Home.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-header style=&quot;height: 55px;&quot;&gt;</span><br><span class="line">    &lt;Strong&gt;ManHub后台管理系统&lt;/Strong&gt;</span><br><span class="line">    &lt;div class=&quot;header-avatar block&quot;&gt;</span><br><span class="line">        &lt;el-avatar class=&quot;el-avatar&quot; size=&quot;medium&quot; :src=&quot;userInfo.avatar&quot;&gt;&lt;/el-avatar&gt;</span><br><span class="line">        &lt;el-dropdown&gt;</span><br><span class="line">          &lt;span class=&quot;el-dropdown-link&quot;&gt;</span><br><span class="line">            &#123;&#123;userInfo.username&#125;&#125;&lt;i class=&quot;el-icon-arrow-down el-icon--right&quot;&gt;&lt;/i&gt;</span><br><span class="line">          &lt;/span&gt;</span><br><span class="line">            &lt;el-dropdown-menu slot=&quot;dropdown&quot;&gt;</span><br><span class="line">                &lt;el-dropdown-item :underline=&quot;false&quot;&gt;</span><br><span class="line">                    &lt;router-link :to=&quot;&#123;name: &#x27;UserCenter&#x27;&#125;&quot;&gt;个人中心&lt;/router-link&gt;</span><br><span class="line">                &lt;/el-dropdown-item&gt;</span><br><span class="line">                &lt;el-dropdown-item @click.native=&quot;logout&quot;&gt;退出&lt;/el-dropdown-item&gt;</span><br><span class="line">            &lt;/el-dropdown-menu&gt;</span><br><span class="line">        &lt;/el-dropdown&gt;</span><br><span class="line">        &lt;el-link &gt;视频讲解&lt;/el-link&gt;</span><br><span class="line">        &lt;el-link&gt;公众号&lt;/el-link&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/el-header&gt;</span><br><span class="line">...</span><br><span class="line">data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        userInfo: &#123;</span><br><span class="line">            id: &#x27;&#x27;,</span><br><span class="line">            username: &#x27;&#x27;,</span><br><span class="line">            avatar: &#x27;&#x27;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">created() &#123;</span><br><span class="line">    this.getUserInfo()</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    getUserInfo() &#123;</span><br><span class="line">        this.$axios.get(&quot;/sys/userInfo&quot;).then(res =&gt; &#123;</span><br><span class="line">            this.userInfo = res.data.data;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">    logout() &#123;</span><br><span class="line">        this.$axios.post(&quot;/logout&quot;).then(res =&gt; &#123;</span><br><span class="line">            console.log(res.data.data)</span><br><span class="line">            localStorage.clear()</span><br><span class="line">            sessionStorage.clear()</span><br><span class="line">            this.$store.commit(&quot;resetState&quot;)</span><br><span class="line">            this.$router.push(&quot;/login&quot;)</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>记得mockjs中返回用户的信息，比较简单我就不写了这个。</p>
<h2 id="9-动态菜单栏开发"><a href="#9-动态菜单栏开发" class="headerlink" title="9. 动态菜单栏开发"></a>9. 动态菜单栏开发</h2><p>上面代码中，左侧的菜单栏的数据是写死的，在实际场景中我们不可能这样做，因为菜单是需要根据登录用户的权限动态显示菜单的，也就是用户看到的菜单栏可能是不一样的，这些数据需要去后端访问获取。</p>
<p>首先我们先把写死的数据简化成一个json数组数据，然后for循环展示出来，代码如下：</p>
<ul>
<li>&#x2F;src&#x2F;views&#x2F;inc&#x2F;SideMenu.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-menu</span><br><span class="line">            class=&quot;el-menu-vertical-demo&quot;</span><br><span class="line">            background-color=&quot;#545c64&quot;</span><br><span class="line">            text-color=&quot;#fff&quot;</span><br><span class="line">            active-text-color=&quot;#ffd04b&quot;</span><br><span class="line">    &gt;</span><br><span class="line">        ...</span><br><span class="line">        &lt;el-submenu default-active=&quot;Index&quot; :index=&quot;menu.name&quot; v-for=&quot;menu in menuList&quot;&gt;</span><br><span class="line">            &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                &lt;i :class=&quot;menu.icon&quot;&gt;&lt;/i&gt;</span><br><span class="line">                &lt;span&gt;&#123;&#123;menu.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">            &lt;router-link :to=&quot;item.path&quot; v-for=&quot;item in menu.children&quot;&gt;</span><br><span class="line">                &lt;el-menu-item :index=&quot;item.name&quot;&gt;</span><br><span class="line">                    &lt;template slot=&quot;title&quot;&gt;</span><br><span class="line">                        &lt;i :class=&quot;item.icon&quot;&gt;&lt;/i&gt;</span><br><span class="line">                        &lt;span slot=&quot;title&quot;&gt;&#123;&#123;item.title&#125;&#125;&lt;/span&gt;</span><br><span class="line">                    &lt;/template&gt;</span><br><span class="line">                &lt;/el-menu-item&gt;</span><br><span class="line">            &lt;/router-link&gt;</span><br><span class="line">        &lt;/el-submenu&gt;</span><br><span class="line">    &lt;/el-menu&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;SideMenu&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                menuList: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        name: &#x27;SysManga&#x27;,</span><br><span class="line">                        title: &#x27;系统管理&#x27;,</span><br><span class="line">                        icon: &#x27;el-icon-s-operation&#x27;,</span><br><span class="line">                        path: &#x27;&#x27;,</span><br><span class="line">                        component: &#x27;&#x27;,</span><br><span class="line">                        children: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                name: &#x27;SysUser&#x27;,</span><br><span class="line">                                title: &#x27;用户管理&#x27;,</span><br><span class="line">                                icon: &#x27;el-icon-s-custom&#x27;,</span><br><span class="line">                                path: &#x27;/sys/users&#x27;,</span><br><span class="line">                                children: []</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        name: &#x27;SysTools&#x27;,</span><br><span class="line">                        title: &#x27;系统工具&#x27;,</span><br><span class="line">                        icon: &#x27;el-icon-s-tools&#x27;,</span><br><span class="line">                        path: &#x27;&#x27;,</span><br><span class="line">                        children: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                name: &#x27;SysDict&#x27;,</span><br><span class="line">                                title: &#x27;数字字典&#x27;,</span><br><span class="line">                                icon: &#x27;el-icon-s-order&#x27;,</span><br><span class="line">                                path: &#x27;/sys/dicts&#x27;,</span><br><span class="line">                                children: []</span><br><span class="line">                            &#125;,</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ],</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>可以看到，我用for循环显示数据，那么这样变动菜单栏时候只需要修改data中的menuList即可。效果和之前的完全一样。<br>现在menuList的数据我们是直接写到页面data上的，一般我们是要请求后端的，所以这里我们定义一个mock接口，因为是动态菜单，一般我们也要考虑到权限问题，所以我们请求数据的时候一般除了动态菜单，还要权限的数据，比如菜单的添加、删除是否有权限，是否能显示该按钮等，有了权限数据我们就定动态决定是否展示这些按钮了。</p>
<ul>
<li>src&#x2F;mock.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Mock.mock(&#x27;/sys/menu/nav&#x27;, &#x27;get&#x27;, () =&gt; &#123;</span><br><span class="line">   // 菜单json</span><br><span class="line">   let nav = [</span><br><span class="line">      &#123;</span><br><span class="line">         name: &#x27;SysManga&#x27;,</span><br><span class="line">         ...</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">         name: &#x27;SysTools&#x27;,</span><br><span class="line">         ...</span><br><span class="line">      &#125;</span><br><span class="line">   ]</span><br><span class="line">   // 权限数据</span><br><span class="line">   let authoritys = [&#x27;SysUser&#x27;, &quot;SysUser:save&quot;]</span><br><span class="line"></span><br><span class="line">   Result.data = &#123;&#125;</span><br><span class="line">   Result.data.nav = nav</span><br><span class="line">   Result.data.authoritys = authoritys</span><br><span class="line">   return Result</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>上面json数据太长，所以我部分用省略号…替代了，以后的代码也会这样哈。<br>这样我们就定义好了导航菜单的接口，什么时候调用呢？应该登录成功完成之后调用，但是并不是每一次打开我们都需要去登录，也就是浏览器已经存储到用户token的时候我们不需要再去登录的了，所以我们不能放在登录完成的方法里。那么是当前这个Home.vue页面吗？看起来没什么问题，方正每次都会进入这个页面，然后搞个开关控制是否重新加载就行？</p>
<p>我们这里还要考虑一个问题，就是导航菜单的路由问题，啥意思？就是点击菜单之后路由到哪个页面是需要在router中声明的。</p>
<p>这个路由问题我提供两个解决方案：</p>
<ul>
<li>1、全部写死，也就是提前写好所有的路由，不管用户有没有权限，后面在通过权限数据来判断用户是否有权限访问路由。</li>
<li>2、动态渲染，就是把加载到的导航菜单数据动态绑定路由</li>
</ul>
<p>这里我们使用第二种解决方案，这类简单点，后续我们再开发页面的时候就不需要去改动路由，可以动态绑定。</p>
<p>综上，我们把加载菜单数据这个动作放在router.js中。Router有个前缀拦截，就是在路由到页面之前我们可以做一些判断或者加载数据。</p>
<p>在router.js中添加一下代码：</p>
<ul>
<li>src&#x2F;router&#x2F;index.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach((to, from, next) =&gt; &#123;</span><br><span class="line">  let hasRoute = store.state.menus.hasRoute</span><br><span class="line">  let menus = store.state.menus.menuList</span><br><span class="line">  let token = localStorage.getItem(&quot;token&quot;)</span><br><span class="line">  if (to.path == &#x27;/login&#x27;) &#123;</span><br><span class="line">    console.log(&quot;login!!!!!!!!!!!&quot;)</span><br><span class="line">    next()</span><br><span class="line">  &#125; else if (!token) &#123;</span><br><span class="line">    console.log(&quot;还没有token！！！&quot;)</span><br><span class="line">    next(&#123;path: &quot;/login&quot;&#125;)</span><br><span class="line">  &#125;else if (to.path == &#x27;/&#x27; || to.path == &#x27;&#x27;) &#123;</span><br><span class="line">    next(&#123;path: &quot;/index&quot;&#125;)</span><br><span class="line">  &#125;else if (!hasRoute) &#123;</span><br><span class="line">    let newRoutes = router.options.routes;</span><br><span class="line">    axios.get(&quot;/sys/menu/nav&quot;, &#123;headers:&#123;</span><br><span class="line">        Authorization: localStorage.getItem(&quot;token&quot;)</span><br><span class="line">      &#125;&#125;).then(res =&gt; &#123;</span><br><span class="line">      console.log(res.data.data)</span><br><span class="line">      store.commit(&quot;setMenuList&quot;, res.data.data.nav)</span><br><span class="line">      store.commit(&quot;setPermList&quot;, res.data.data.authoritys)</span><br><span class="line">      res.data.data.nav.forEach(menu =&gt; &#123;</span><br><span class="line">        if (menu.children) &#123;</span><br><span class="line">          menu.children.forEach(e =&gt; &#123;</span><br><span class="line">            let route = menuToRoute(e)</span><br><span class="line">            if(route) &#123;</span><br><span class="line">              newRoutes[0].children.push(route)</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">      console.log(&quot;oldRoutes---------------&quot;)</span><br><span class="line">      console.log(newRoutes)</span><br><span class="line">      router.addRoutes(newRoutes)</span><br><span class="line">      store.commit(&quot;changeRouteStatus&quot;, true)</span><br><span class="line">      next(&#123;path: to.path&#125;)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    console.log(&quot;已经有路由了------------&quot;)</span><br><span class="line">    next()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">const menuToRoute = (menu) =&gt; &#123;</span><br><span class="line">  console.log(&quot;正在添加menu--》&quot;)</span><br><span class="line">  console.log(menu)</span><br><span class="line">  if (!menu.component) &#123;</span><br><span class="line">    return null</span><br><span class="line">  &#125;</span><br><span class="line">  // 复制属性</span><br><span class="line">  let route = &#123;</span><br><span class="line">    name: menu.name,</span><br><span class="line">    path: menu.path,</span><br><span class="line">    meta: &#123;</span><br><span class="line">      icon: menu.icon,</span><br><span class="line">      title: menu.title</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  route.component = () =&gt; import(&#x27;@/views/&#x27; + menu.component +&#x27;.vue&#x27;)</span><br><span class="line">  return route</span><br><span class="line">&#125;</span><br><span class="line">export default router</span><br></pre></td></tr></table></figure>

<p>可以看到，我们通过menuToRoute就是把menu数据转换成路由对象，然后router.addRoutes(newRoutes)动态添加路由对象。<br>同时上面的menu对象中，有个menu.component，这个就是连接对应的组件，我们需要添加上去，比如说&#x2F;sys&#x2F;users链接对应到component(sys&#x2F;User)。这样我们才能绑定添加到路由。所以我会修改mock中的nav的数据成这样：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">let nav = [</span><br><span class="line">   &#123;</span><br><span class="line">      &quot;id&quot;: 1,</span><br><span class="line">      &quot;title&quot;: &quot;系统管理&quot;,</span><br><span class="line">      &quot;icon&quot;: &quot;el-icon-s-operation&quot;,</span><br><span class="line">      &quot;path&quot;: &quot;&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;sys:manage&quot;,</span><br><span class="line">      &quot;component&quot;: &quot;&quot;,</span><br><span class="line">      &quot;children&quot;: [</span><br><span class="line">         &#123;</span><br><span class="line">            &quot;id&quot;: 2,</span><br><span class="line">            &quot;title&quot;: &quot;用户管理&quot;,</span><br><span class="line">            &quot;icon&quot;: &quot;el-icon-s-custom&quot;,</span><br><span class="line">            &quot;path&quot;: &quot;/sys/users&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;sys:user:list&quot;,</span><br><span class="line">            &quot;component&quot;: &quot;sys/User&quot;,</span><br><span class="line">            &quot;children&quot;: []</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">            &quot;id&quot;: 3,</span><br><span class="line">            &quot;title&quot;: &quot;角色管理&quot;,</span><br><span class="line">            &quot;icon&quot;: &quot;el-icon-rank&quot;,</span><br><span class="line">            &quot;path&quot;: &quot;/sys/roles&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;sys:role:list&quot;,</span><br><span class="line">            &quot;component&quot;: &quot;sys/Role&quot;,</span><br><span class="line">            &quot;children&quot;: []</span><br><span class="line">         &#125;,</span><br><span class="line">         &#123;</span><br><span class="line">            &quot;id&quot;: 4,</span><br><span class="line">            &quot;title&quot;: &quot;菜单管理&quot;,</span><br><span class="line">            &quot;icon&quot;: &quot;el-icon-menu&quot;,</span><br><span class="line">            &quot;path&quot;: &quot;/sys/menus&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;sys:menu:list&quot;,</span><br><span class="line">            &quot;component&quot;: &quot;sys/Menu&quot;,</span><br><span class="line">            &quot;children&quot;: []</span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;,</span><br><span class="line">   &#123;</span><br><span class="line">      &quot;id&quot;: 5,</span><br><span class="line">      &quot;title&quot;: &quot;系统工具&quot;,</span><br><span class="line">      &quot;icon&quot;: &quot;el-icon-s-tools&quot;,</span><br><span class="line">      &quot;path&quot;: &quot;&quot;,</span><br><span class="line">      &quot;name&quot;: &quot;sys:tools&quot;,</span><br><span class="line">      &quot;component&quot;: null,</span><br><span class="line">      &quot;children&quot;: [</span><br><span class="line">         &#123;</span><br><span class="line">            &quot;id&quot;: 6,</span><br><span class="line">            &quot;title&quot;: &quot;数字字典&quot;,</span><br><span class="line">            &quot;icon&quot;: &quot;el-icon-s-order&quot;,</span><br><span class="line">            &quot;path&quot;: &quot;/sys/dicts&quot;,</span><br><span class="line">            &quot;name&quot;: &quot;sys:dict:list&quot;,</span><br><span class="line">            &quot;component&quot;: &quot;sys/Dict&quot;,</span><br><span class="line">            &quot;children&quot;: []</span><br><span class="line">         &#125;</span><br><span class="line">      ]</span><br><span class="line">   &#125;</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>同时上面router中我们还通过判断是否登录页面，是否有token等判断提前判断是否能加载菜单，同时还做了个开关hasRoute来动态判断是否已经加载过菜单。</p>
<p>还需要在store中定义几个方法用于存储数据，我们定义一个menu模块，所以在store中新建文件夹modules，然后新建menus.js</p>
<ul>
<li>src&#x2F;store&#x2F;modules&#x2F;menus.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">import Vuex from &#x27;vuex&#x27;</span><br><span class="line">Vue.use(Vuex)</span><br><span class="line">export default &#123;</span><br><span class="line">   state: &#123;</span><br><span class="line">      // 菜单栏数据</span><br><span class="line">      menuList:  [],</span><br><span class="line">      // 权限数据</span><br><span class="line">      permList:  [],</span><br><span class="line">      hasRoute: false</span><br><span class="line">   &#125;,</span><br><span class="line">   mutations: &#123;</span><br><span class="line">      changeRouteStatus(state, hasRoute) &#123;</span><br><span class="line">         state.hasRoute = hasRoute</span><br><span class="line">         sessionStorage.setItem(&quot;hasRoute&quot;, hasRoute)</span><br><span class="line">      &#125;,</span><br><span class="line">      setMenuList(state, menus) &#123;</span><br><span class="line">         state.menuList = menus</span><br><span class="line">      &#125;,</span><br><span class="line">      setPermList(state, authoritys) &#123;</span><br><span class="line">         state.permList = authoritys</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>记得在store中import这个模块，然后添加到modules：</p>
<ul>
<li><p>src&#x2F;store&#x2F;index.js</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">import menus from &quot;./modules/menus&quot;</span><br><span class="line">...</span><br><span class="line">export default new Vuex.Store(&#123;</span><br><span class="line">...</span><br><span class="line">modules: &#123;</span><br><span class="line">  menus</span><br><span class="line">&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>这样我们菜单的数据就可以加载了，然后再SideMenu.vue中直接获取store中的menuList数据即可显示菜单出来了。</p>
</li>
<li><p>src&#x2F;views&#x2F;inc&#x2F;SideMenu.vue</p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">        menuList: this.$store.state.menus.menuList,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后效果如下：<br><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/489f7ce2ede747558206a6d533bdd3a2.png" alt="图片"></p>
<p>好了，好像已经有点完善了哈哈。</p>
<h2 id="10-动态标签页开发"><a href="#10-动态标签页开发" class="headerlink" title="10. 动态标签页开发"></a>10. 动态标签页开发</h2><p>上面做完之后，总还觉得少点什么，对了标签页，我看别的后台管理系统都有这个，效果是这样的：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/2c6ed79157c34f3d873e5a0a6831b91c.png" alt="图片"></p>
<p>搞起搞起，别人有我不能没有，于是我去element-ui中寻了一圈，发现Tab标签页组件挺符合我们要求的，可以动态增减标签页。</p>
<p>理想的动作是这样的：</p>
<ol>
<li>当我们点击导航菜单，上方会添加一个对应的标签，注意不能重复添加，发现已存在标签直接切换到这标签即可</li>
<li>删除当前标签的时候会自动切换到前一个标签页</li>
<li>点击标签页的时候会调整到对应的内容页中</li>
</ol>
<p>综合Vue的思想，我们可以这样设计：在Store中统一存储：1、当前标签Tab，2、已存在的标签Tab列表，然后页面从Store中获取列表显示，并切换到当前Tab即可。删除时候我们循环当前Tab列表，剔除Tab，并切换到指定Tab。</p>
<p>我们先和左侧菜单一样单独定义一个组件Tabs.vue放在views&#x2F;inc文件夹内：</p>
<ul>
<li>src&#x2F;views&#x2F;inc&#x2F;Tabs.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;el-tabs v-model=&quot;editableTabsValue&quot; type=&quot;card&quot; closable @tab-remove=&quot;removeTab&quot; @tab-click=&quot;clickTab&quot;&gt;</span><br><span class="line">        &lt;el-tab-pane</span><br><span class="line">                v-for=&quot;item in editableTabs&quot;</span><br><span class="line">                :key=&quot;item.name&quot;</span><br><span class="line">                :label=&quot;item.title&quot;</span><br><span class="line">                :name=&quot;item.name&quot;</span><br><span class="line">        &gt;</span><br><span class="line">        &lt;/el-tab-pane&gt;</span><br><span class="line">    &lt;/el-tabs&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    export default &#123;</span><br><span class="line">        name: &quot;Tabs&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            editableTabs: &#123;</span><br><span class="line">                get() &#123;</span><br><span class="line">                    return this.$store.state.menus.editableTabs;</span><br><span class="line">                &#125;,</span><br><span class="line">                set(val) &#123;</span><br><span class="line">                    this.$store.state.menus.editableTabs = val</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            editableTabsValue: &#123;</span><br><span class="line">                get() &#123;</span><br><span class="line">                    return this.$store.state.menus.editableTabsValue;</span><br><span class="line">                &#125;,</span><br><span class="line">                set(val) &#123;</span><br><span class="line">                    this.$store.state.menus.editableTabsValue = val;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            clickTab(target) &#123;</span><br><span class="line">                this.$router.push(&#123;name: target.name&#125;)</span><br><span class="line">            &#125;,</span><br><span class="line">            removeTab(targetName) &#123;</span><br><span class="line">                let tabs = this.editableTabs;</span><br><span class="line">                let activeName = this.editableTabsValue;</span><br><span class="line">                // 首页不能删除</span><br><span class="line">                if (targetName === &quot;Index&quot;) &#123;</span><br><span class="line">                    return</span><br><span class="line">                &#125;</span><br><span class="line">                if (activeName === targetName) &#123;</span><br><span class="line">                    tabs.forEach((tab, index) =&gt; &#123;</span><br><span class="line">                        if (tab.name === targetName) &#123;</span><br><span class="line">                            let nextTab = tabs[index + 1] || tabs[index - 1];</span><br><span class="line">                            if (nextTab) &#123;</span><br><span class="line">                                activeName = nextTab.name;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                this.editableTabsValue = activeName;</span><br><span class="line">                this.editableTabs = tabs.filter(tab =&gt; tab.name !== targetName);</span><br><span class="line">                this.$router.push(&#123;name: activeName&#125;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>上面代码中，computed表示当其依赖的属性的值发生变化时，计算属性会重新计算，反之，则使用缓存中的属性值。这样我们就可以实时监测Tabs标签的动态变化实时显示（相当于实时get、set）。其他clickTab、removeTab的逻辑其实也还算简单，特别是removeTab注意考虑多种情况就可以。<br>然后我们来到store中的menu.js，我们添加 editableTabsValue和editableTabs，然后把首页作为默认显示的页面。</p>
<ul>
<li>src&#x2F;store&#x2F;modules&#x2F;menus.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">state: &#123;</span><br><span class="line">   // 菜单栏数据</span><br><span class="line">   menuList:  [],</span><br><span class="line">   // 权限数据</span><br><span class="line">   permList:  [],</span><br><span class="line">   hasRoute: false,</span><br><span class="line"></span><br><span class="line">   editableTabsValue: &#x27;Index&#x27;,</span><br><span class="line">   editableTabs: [</span><br><span class="line">      &#123;</span><br><span class="line">         title: &#x27;首页&#x27;,</span><br><span class="line">         name: &#x27;Index&#x27;</span><br><span class="line">      &#125;</span><br><span class="line">   ],</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>ok，然后再Home.vue中引入我们Tabs.vue这个组件，添加代码的地方比较零散，所以我就写重要代码出来就好，自行添加到指定的地方哈。</p>
<ul>
<li>src&#x2F;views&#x2F;Home.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 引入组件</span><br><span class="line">import Tabs from &quot;./inc/Tabs&quot;</span><br><span class="line"># 声明组件</span><br><span class="line">components: &#123;</span><br><span class="line">   SideMenu, Tabs</span><br><span class="line">&#125;,</span><br><span class="line">&lt;el-main&gt;</span><br><span class="line">   # 使用组件</span><br><span class="line">   &lt;Tabs&gt;&lt;/Tabs&gt;</span><br><span class="line">   &lt;div style=&quot;margin: 0 15px;&quot;&gt;</span><br><span class="line">      &lt;router-view&gt;&lt;/router-view&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/el-main&gt;</span><br></pre></td></tr></table></figure>

<p>最后效果如下：<br><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/a810bca0141c4514a51f73ef3b9f1092.png" alt="图片"></p>
<p>好了完成了第一步了，现在我们需要点击菜单导航，然后再tabs列表中添加tab标签页，那么我们来到SideMenu.vue，我们给el-menu-item每个菜单都添加一个点击事件：</p>
<ul>
<li>src&#x2F;views&#x2F;inc&#x2F;SideMenu.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-menu</span><br><span class="line">        # 当前选择的菜单</span><br><span class="line">        :default-active=&quot;activeMenu&quot;</span><br><span class="line">        ...</span><br><span class="line">&gt;</span><br><span class="line">...</span><br><span class="line">&lt;router-link :to=&quot;item.path&quot; v-for=&quot;item in menu.children&quot;&gt;</span><br><span class="line">    &lt;el-menu-item :index=&quot;item.name&quot; @click=&quot;selectMenu(item)&quot;&gt;</span><br><span class="line">        ...</span><br><span class="line">    &lt;/el-menu-item&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br><span class="line">computed: &#123;</span><br><span class="line">    # 选择tab标签时候顺便也要激活当前对应的导航</span><br><span class="line">    activeMenu() &#123;</span><br><span class="line">        return this.$store.state.menus.editableTabsValue</span><br><span class="line">    &#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">    selectMenu(item) &#123;</span><br><span class="line">        console.log(item)</span><br><span class="line">        let obj = &#123;</span><br><span class="line">            name: item.name,</span><br><span class="line">            title: item.title</span><br><span class="line">        &#125;</span><br><span class="line">        this.$store.commit(&quot;addTabs&quot;, obj)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为tabs标签列表我们是存储在store中的，因此我们需要commit提交事件，因此我们在menu.js中添加addTabs方法：</p>
<ul>
<li>src&#x2F;store&#x2F;modules&#x2F;menus.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">   addTabs(state, tab) &#123;</span><br><span class="line">      console.log(tab)</span><br><span class="line">      // 判断是否在栈内</span><br><span class="line">      let index = state.editableTabs.findIndex(item =&gt; item.name === tab.name)</span><br><span class="line">      if (index === -1) &#123;</span><br><span class="line">         // 添加到tabs中</span><br><span class="line">         state.editableTabs.push(tab)</span><br><span class="line">      &#125;</span><br><span class="line">      // 当前激活的tab</span><br><span class="line">      state.editableTabsValue = tab.name</span><br><span class="line">   &#125;,</span><br><span class="line">   setActiveTab(state, tabName) &#123;</span><br><span class="line">      state.editableTabsValue = tabName</span><br><span class="line">   &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>添加tab标签的时候注意需要激活指定当前标签，也就是设置editableTabsValue。然后我们也添加了setActiveTab方法，方便其他地方指定激活某个标签。<br>具体效果如下：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/baeac050efb74aeaa42c952622b10e90.png" alt="图片"></p>
<p>上面的演示看似没什么问题了，但其实细节还是很多的，比如当我们刷新浏览器、或者直接通过输入链接打开页面时候就不会自动帮我们根据链接回显激活Tab。</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/d3c6d54548af4277a89f63c2215b9a4f.png" alt="图片"></p>
<p>从上面图中我们可以看出刷新浏览器之后链接&#x2F;sys&#x2F;users不变，内容不变，但是Tab却不见了，所以我们需要修补一下，当用户是直接通过输入链接形式打开页面的时候我们也能根据链接自动添加激活指定的tab。那么在哪里添加这个回显的方法呢？router中？其实可以，只不过我们需要做判断，因为每次点击导航都会触发router。有没有更简便的方法？有的！因为刷新或者打开页面都是一次性的行为，所以我们可以在更高层的App.vue中做这个回显动作，具体如下：</p>
<ul>
<li>src\App.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">      &lt;router-view/&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;App&quot;,</span><br><span class="line">      watch: &#123;</span><br><span class="line">         // 解决刷新浏览器没有tab的问题</span><br><span class="line">         $route(to, from) &#123;</span><br><span class="line">            if (to.path != &#x27;/login&#x27;) &#123;</span><br><span class="line">               let obj = &#123;</span><br><span class="line">                  name: to.name,</span><br><span class="line">                  title: to.meta.title</span><br><span class="line">               &#125;</span><br><span class="line">               this.$store.commit(&quot;addTabs&quot;, obj)</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>上面代码可以看到，除了login页面，其他页面都会触发addTabs方法，这样我们就可以添加tab和激活tab了。<br><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/2f58687373634ce9b0f6ce024dfb90dc.png" alt="图片"></p>
<p>完美搞定！</p>
<h2 id="11-个人中心"><a href="#11-个人中心" class="headerlink" title="11. 个人中心"></a>11. 个人中心</h2><p>个人中心用来展示用户的基本信息和修改密码，相对简单：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/e34b3709551f49bc88f91967c02cb2d7.png" alt="图片"></p>
<ul>
<li>src&#x2F;views&#x2F;UserCenter.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div style=&quot;text-align: center;&quot;&gt;</span><br><span class="line">      &lt;h2&gt;你好！&#123;&#123; userInfo.username &#125;&#125; 同学&lt;/h2&gt;</span><br><span class="line">      &lt;el-form :model=&quot;passForm&quot; status-icon :rules=&quot;rules&quot; ref=&quot;passForm&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">         &lt;el-form-item label=&quot;旧密码&quot; prop=&quot;currentPass&quot;&gt;</span><br><span class="line">            &lt;el-input type=&quot;password&quot; v-model=&quot;passForm.currentPass&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">         &lt;el-form-item label=&quot;新密码&quot; prop=&quot;password&quot;&gt;</span><br><span class="line">            &lt;el-input type=&quot;password&quot; v-model=&quot;passForm.password&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">         &lt;el-form-item label=&quot;确认密码&quot; prop=&quot;checkPass&quot;&gt;</span><br><span class="line">            &lt;el-input type=&quot;password&quot; v-model=&quot;passForm.checkPass&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">         &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;submitForm(&#x27;passForm&#x27;)&quot;&gt;提交&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button @click=&quot;resetForm(&#x27;passForm&#x27;)&quot;&gt;重置&lt;/el-button&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;Login&quot;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         var validatePass = (rule, value, callback) =&gt; &#123;</span><br><span class="line">            if (value === &#x27;&#x27;) &#123;</span><br><span class="line">               callback(new Error(&#x27;请再次输入密码&#x27;));</span><br><span class="line">            &#125; else if (value !== this.passForm.password) &#123;</span><br><span class="line">               callback(new Error(&#x27;两次输入密码不一致!&#x27;));</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">               callback();</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;;</span><br><span class="line">         return &#123;</span><br><span class="line">            userInfo: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            passForm: &#123;</span><br><span class="line">               password: &#x27;111111&#x27;,</span><br><span class="line">               checkPass: &#x27;111111&#x27;,</span><br><span class="line">               currentPass: &#x27;111111&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            rules: &#123;</span><br><span class="line">               password: [</span><br><span class="line">                  &#123; required: true, message: &#x27;请输入新密码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">                  &#123; min: 6, max: 12, message: &#x27;长度在 6 到 12 个字符&#x27;, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">               ],</span><br><span class="line">               checkPass: [</span><br><span class="line">                  &#123; required: true, validator: validatePass, trigger: &#x27;blur&#x27; &#125;</span><br><span class="line">               ],</span><br><span class="line">               currentPass: [</span><br><span class="line">                  &#123; required: true, message: &#x27;请输入当前密码&#x27;, trigger: &#x27;blur&#x27; &#125;,</span><br><span class="line">               ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">         this.getUserInfo()</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">         getUserInfo() &#123;</span><br><span class="line">            this.$axios.get(&quot;/sys/userInfo&quot;).then(res =&gt; &#123;</span><br><span class="line">               this.userInfo = res.data.data;</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         submitForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].validate((valid) =&gt; &#123;</span><br><span class="line">               if (valid) &#123;</span><br><span class="line">                  const _this = this</span><br><span class="line">                  this.$axios.post(&#x27;/sys/user/updataPass&#x27;, this.passForm).then(res =&gt; &#123;</span><br><span class="line">                     _this.$alert(res.data.msg, &#x27;提示&#x27;, &#123;</span><br><span class="line">                        confirmButtonText: &#x27;确定&#x27;,</span><br><span class="line">                        callback: action =&gt; &#123;</span><br><span class="line">                           this.$refs[formName].resetFields();</span><br><span class="line">                        &#125;</span><br><span class="line">                     &#125;);</span><br><span class="line">                  &#125;)</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                  console.log(&#x27;error submit!!&#x27;);</span><br><span class="line">                  return false;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;,</span><br><span class="line">         resetForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].resetFields();</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.el-form &#123;</span><br><span class="line">   width: 420px;</span><br><span class="line">   margin: 50px auto;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="12-菜单界面"><a href="#12-菜单界面" class="headerlink" title="12. 菜单界面"></a>12. 菜单界面</h2><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/e539c20d93f84f7c8dae7c5785253605.png" alt="图片"></p>
<p>菜单管理我们用到了Table表格组件的树形结构数据，我们只需要根据例子自己组装数据，就可以自动显示出来了，在新增数据的时候有个地方需要讲一下：</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/4a051ee030ce44738ae9635b25b1c161.png" alt="图片"></p>
<p>这里本应该是个树形数据的结构，但是现有的elementui不是很满足，于是我就拿了个简单的下拉框，然后子菜单就加上一个【- 】作为前缀，这样看起来就像一个树形结构了，也比较清晰。具体代码如下：</p>
<ul>
<li>src&#x2F;views&#x2F;sys&#x2F;Menu.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-form-item label=&quot;上级菜单&quot; prop=&quot;parentId&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">   &lt;!--模拟树形下拉框--&gt;</span><br><span class="line">   &lt;el-select v-model=&quot;editForm.parentId&quot; placeholder=&quot;请选择上级菜单&quot; &gt;</span><br><span class="line">      &lt;template v-for=&quot;item in tableData&quot;&gt;</span><br><span class="line">         &lt;el-option :label=&quot;item.name&quot; :value=&quot;item.id&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">         &lt;template v-for=&quot;child in item.children&quot;&gt;</span><br><span class="line">            &lt;el-option :label=&quot;child.name&quot; :value=&quot;child.id&quot;&gt;</span><br><span class="line">               &lt;span&gt;&#123;&#123; &#x27;- &#x27; + child.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;/el-option&gt;</span><br><span class="line">         &lt;/template&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">   &lt;/el-select&gt;</span><br><span class="line">&lt;/el-form-item&gt;</span><br></pre></td></tr></table></figure>

<p>其他都是基本的增删改查，填数据啥的，就比较繁琐和简单了，贴代码了哈：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">      &lt;!--搜索框--&gt;</span><br><span class="line">      &lt;el-form :inline=&quot;true&quot; :model=&quot;searchForm&quot;&gt;</span><br><span class="line">         &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = true&quot; v-if=&quot;hasAuth(&#x27;sys:menu:save&#x27;)&quot;&gt;新增&lt;/el-button&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!--列表--&gt;</span><br><span class="line">      &lt;el-table</span><br><span class="line">            :data=&quot;tableData&quot;</span><br><span class="line">            style=&quot;width: 100%;margin-bottom: 20px;&quot;</span><br><span class="line">            row-key=&quot;id&quot;</span><br><span class="line">            border</span><br><span class="line">            stripe</span><br><span class="line">            default-expand-all</span><br><span class="line">            :tree-props=&quot;&#123;children: &#x27;children&#x27;, hasChildren: &#x27;hasChildren&#x27;&#125;&quot;&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;name&quot;</span><br><span class="line">               label=&quot;名称&quot;</span><br><span class="line">               width=&quot;180&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;perms&quot;</span><br><span class="line">               label=&quot;权限编码&quot;</span><br><span class="line">               width=&quot;180&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;icon&quot;</span><br><span class="line">               label=&quot;图标&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;type&quot;</span><br><span class="line">               label=&quot;类型&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-tag v-if=&quot;scope.row.type === 0&quot; size=&quot;small&quot;&gt;目录&lt;/el-tag&gt;</span><br><span class="line">               &lt;el-tag v-else-if=&quot;scope.row.type === 1&quot; size=&quot;small&quot; type=&quot;success&quot;&gt;菜单&lt;/el-tag&gt;</span><br><span class="line">               &lt;el-tag v-else-if=&quot;scope.row.type === 2&quot; size=&quot;small&quot; type=&quot;info&quot;&gt;按钮&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;path&quot;</span><br><span class="line">               label=&quot;菜单URL&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;component&quot;</span><br><span class="line">               label=&quot;菜单组件&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;orderNum&quot;</span><br><span class="line">               label=&quot;排序号&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;statu&quot;</span><br><span class="line">               label=&quot;状态&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-tag v-if=&quot;scope.row.statu === 0&quot; size=&quot;small&quot; type=&quot;danger&quot;&gt;禁用&lt;/el-tag&gt;</span><br><span class="line">               &lt;el-tag v-else-if=&quot;scope.row.statu === 1&quot; size=&quot;small&quot; type=&quot;success&quot;&gt;正常&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               label=&quot;操作&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-button type=&quot;text&quot; @click=&quot;editHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:menu:update&#x27;)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">               &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">               &lt;el-popconfirm title=&quot;确定要删除这条记录吗？&quot; @confirm=&quot;delHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:menu:delete&#x27;)&quot;&gt;</span><br><span class="line">                  &lt;el-button type=&quot;text&quot; slot=&quot;reference&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">               &lt;/el-popconfirm&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">      &lt;el-dialog title=&quot;菜单信息&quot; :visible.sync=&quot;dialogFormVisible&quot; width=&quot;600px&quot; @closed=&quot;resetForm(&#x27;editForm&#x27;)&quot;&gt;</span><br><span class="line">         &lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editForm&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;上级菜单&quot; prop=&quot;parentId&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;!--模拟树形下拉框--&gt;</span><br><span class="line">               &lt;el-select v-model=&quot;editForm.parentId&quot; placeholder=&quot;请选择上级菜单&quot; &gt;</span><br><span class="line">                  &lt;template v-for=&quot;item in tableData&quot;&gt;</span><br><span class="line">                     &lt;el-option :label=&quot;item.name&quot; :value=&quot;item.id&quot;&gt;&lt;/el-option&gt;</span><br><span class="line">                     &lt;template v-for=&quot;child in item.children&quot;&gt;</span><br><span class="line">                        &lt;el-option :label=&quot;child.name&quot; :value=&quot;child.id&quot;&gt;</span><br><span class="line">                           &lt;span&gt;&#123;&#123; &#x27;- &#x27; + child.name &#125;&#125;&lt;/span&gt;</span><br><span class="line">                        &lt;/el-option&gt;</span><br><span class="line">                     &lt;/template&gt;</span><br><span class="line">                  &lt;/template&gt;</span><br><span class="line">               &lt;/el-select&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;菜单名称&quot; prop=&quot;name&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.name&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;权限编码&quot; prop=&quot;perms&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.perms&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;图标&quot; prop=&quot;icon&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.icon&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;菜单URL&quot; prop=&quot;path&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.path&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;菜单组件&quot; prop=&quot;component&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.component&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;类型&quot; prop=&quot;type&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-radio-group v-model=&quot;editForm.type&quot;&gt;</span><br><span class="line">                  &lt;el-radio :label=0&gt;目录&lt;/el-radio&gt;</span><br><span class="line">                  &lt;el-radio :label=1&gt;菜单&lt;/el-radio&gt;</span><br><span class="line">                  &lt;el-radio :label=2&gt;按钮&lt;/el-radio&gt;</span><br><span class="line">               &lt;/el-radio-group&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;状态&quot; prop=&quot;statu&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-radio-group v-model=&quot;editForm.statu&quot;&gt;</span><br><span class="line">                  &lt;el-radio :label=0&gt;禁用&lt;/el-radio&gt;</span><br><span class="line">                  &lt;el-radio :label=1&gt;正常&lt;/el-radio&gt;</span><br><span class="line">               &lt;/el-radio-group&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;排序号&quot; prop=&quot;orderNum&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input-number v-model=&quot;editForm.orderNum&quot; :min=&quot;1&quot; label=&quot;排序号&quot;&gt;1&lt;/el-input-number&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br><span class="line">         &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">            &lt;el-button @click=&quot;resetForm(&#x27;editForm&#x27;)&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;submitEditForm(&#x27;editForm&#x27;)&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;Menu&quot;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         return &#123;</span><br><span class="line">            searchForm: &#123;</span><br><span class="line">               name: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            tableData: [],</span><br><span class="line">            multipleSelection: [],</span><br><span class="line">            dialogFormVisible: false,</span><br><span class="line">            editForm: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            editFormRules: &#123;</span><br><span class="line">               parentId: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请选择上级菜单&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               name: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入名称&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               perms: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入权限编码&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               type: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请选择状态&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               orderNum: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请填入排序号&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               statu: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请选择状态&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ]</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">         getMenuTree() &#123;</span><br><span class="line">            this.$axios.get(&quot;/sys/menu/list&quot;, &#123;</span><br><span class="line">               params: &#123;</span><br><span class="line">                  name: this.searchForm.name</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;).then(res =&gt; &#123;</span><br><span class="line">               console.log(res)</span><br><span class="line">               this.tableData = res.data.data</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         submitEditForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].validate((valid) =&gt; &#123;</span><br><span class="line">               if (valid) &#123;</span><br><span class="line">                  this.$axios.post(&#x27;/sys/menu/&#x27; + (this.editForm.id? &quot;update&quot; : &quot;save&quot;) ,this.editForm)</span><br><span class="line">                     .then(res =&gt; &#123;</span><br><span class="line">                        console.log(res.data)</span><br><span class="line">                        this.resetForm(formName)</span><br><span class="line">                        this.$message(&#123;</span><br><span class="line">                           showClose: true,</span><br><span class="line">                           message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                           type: &#x27;success&#x27;,</span><br><span class="line">                           onClose: () =&gt; &#123;</span><br><span class="line">                              this.getMenuTree()</span><br><span class="line">                           &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                     &#125;)</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                  console.log(&#x27;error submit!!&#x27;);</span><br><span class="line">                  return false;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;,</span><br><span class="line">         editHandle(id) &#123;</span><br><span class="line">            console.log(id)</span><br><span class="line">            this.$axios.get(&quot;/sys/menu/info/&quot; + id).then(res =&gt; &#123;</span><br><span class="line">               this.editForm = res.data.data</span><br><span class="line">               this.dialogFormVisible = true</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         delHandle(id) &#123;</span><br><span class="line">            this.$axios.post(&quot;/sys/menu/delete/&quot; + id).then(res =&gt; &#123;</span><br><span class="line">               console.log(res)</span><br><span class="line">               this.$message(&#123;</span><br><span class="line">                  showClose: true,</span><br><span class="line">                  message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                  type: &#x27;success&#x27;,</span><br><span class="line">                  onClose: () =&gt; &#123;</span><br><span class="line">                     this.getMenuTree()</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         resetForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].resetFields();</span><br><span class="line">            this.editForm = &#123;&#125;</span><br><span class="line">            this.dialogFormVisible = false</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">         this.getMenuTree()</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="13-角色界面"><a href="#13-角色界面" class="headerlink" title="13. 角色界面"></a>13. 角色界面</h2><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/1a741733072e413a96048d288d034070.png" alt="图片"></p>
<p>角色需要和菜单权限做关联，菜单是个树形结构的，</p>
<p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/e0d23d9422e94d3183bc969af3703ab1.png" alt="图片"></p>
<p>因为我们父节点是列表，所以注意不要选中父节点就自动选子节点，注意分开哈哈。</p>
<p>贴代码啦：</p>
<ul>
<li>src&#x2F;views&#x2F;sys&#x2F;Role.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">      &lt;!--搜索框--&gt;</span><br><span class="line">      &lt;el-form :inline=&quot;true&quot; :model=&quot;searchForm&quot; class=&quot;searchForm&quot;&gt;</span><br><span class="line">         &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">                  v-model=&quot;searchForm.name&quot;</span><br><span class="line">                  placeholder=&quot;名称&quot;</span><br><span class="line">                  clearable&gt;</span><br><span class="line">            &lt;/el-input&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">         &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-button @click=&quot;getRoleList()&quot;&gt;搜索&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = true&quot; v-if=&quot;hasAuth(&#x27;sys:role:save&#x27;)&quot;&gt;新增&lt;/el-button&gt;</span><br><span class="line">            &lt;el-popconfirm title=&quot;确定要删除这些记录吗？&quot; @confirm=&quot;delHandle(null)&quot; style=&quot;margin-left: 10px;&quot; v-if=&quot;hasAuth(&#x27;sys:role:delete&#x27;)&quot;&gt;</span><br><span class="line">               &lt;el-button type=&quot;danger&quot; slot=&quot;reference&quot; :disabled=&quot;delBtnStu&quot;&gt;批量删除&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-popconfirm&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!--列表--&gt;</span><br><span class="line">      &lt;el-table</span><br><span class="line">            ref=&quot;multipleTable&quot;</span><br><span class="line">            border</span><br><span class="line">            stripe</span><br><span class="line">            :data=&quot;tableData&quot;</span><br><span class="line">            tooltip-effect=&quot;dark&quot;</span><br><span class="line">            style=&quot;width: 100%&quot;</span><br><span class="line">            @selection-change=&quot;handleSelectionChange&quot;&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               type=&quot;selection&quot;</span><br><span class="line">               width=&quot;55&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;name&quot;</span><br><span class="line">               label=&quot;名称&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;code&quot;</span><br><span class="line">               label=&quot;唯一编码&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;remark&quot;</span><br><span class="line">               label=&quot;描述&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;statu&quot;</span><br><span class="line">               label=&quot;状态&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-tag v-if=&quot;scope.row.statu === 0&quot; size=&quot;small&quot; type=&quot;danger&quot;&gt;禁用&lt;/el-tag&gt;</span><br><span class="line">               &lt;el-tag v-else-if=&quot;scope.row.statu === 1&quot; size=&quot;small&quot; type=&quot;success&quot;&gt;正常&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               label=&quot;操作&quot;</span><br><span class="line">               width=&quot;220&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-button type=&quot;text&quot; @click=&quot;permHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:role:perm&#x27;)&quot;&gt;分配权限&lt;/el-button&gt;</span><br><span class="line">               &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">               &lt;el-button type=&quot;text&quot; @click=&quot;editHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:role:update&#x27;)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">               &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">               &lt;el-popconfirm title=&quot;确定要删除这条记录吗？&quot; @confirm=&quot;delHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:role:delete&#x27;)&quot;&gt;</span><br><span class="line">                  &lt;el-button type=&quot;text&quot; slot=&quot;reference&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">               &lt;/el-popconfirm&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">      &lt;!--页码--&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">            :current-page=&quot;current&quot;</span><br><span class="line">            :page-sizes=&quot;[10, 20, 50, 100]&quot;</span><br><span class="line">            :page-size=&quot;size&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;total&quot;&gt;</span><br><span class="line">      &lt;/el-pagination&gt;</span><br><span class="line">      &lt;!-- 编辑对话框 --&gt;</span><br><span class="line">      &lt;el-dialog title=&quot;角色信息&quot; :visible.sync=&quot;dialogFormVisible&quot; width=&quot;600px&quot; @closed=&quot;resetForm(&#x27;editForm&#x27;)&quot;&gt;</span><br><span class="line">         &lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editForm&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;角色名称&quot; prop=&quot;name&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.name&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;唯一编码&quot; prop=&quot;code&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.code&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;描述&quot; prop=&quot;remark&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.remark&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;状态&quot; prop=&quot;statu&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-radio-group v-model=&quot;editForm.statu&quot;&gt;</span><br><span class="line">                  &lt;el-radio :label=&quot;0&quot;&gt;禁用&lt;/el-radio&gt;</span><br><span class="line">                  &lt;el-radio :label=&quot;1&quot;&gt;正常&lt;/el-radio&gt;</span><br><span class="line">               &lt;/el-radio-group&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br><span class="line">         &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">            &lt;el-button @click=&quot;resetForm(&#x27;editForm&#x27;)&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;submitEditForm(&#x27;editForm&#x27;)&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line">      &lt;!-- 分配权限对话框 --&gt;</span><br><span class="line">      &lt;el-dialog title=&quot;分配权限&quot; :visible.sync=&quot;permDialogFormVisible&quot; width=&quot;600px&quot; @closed=&quot;resetForm(&#x27;permForm&#x27;)&quot;&gt;</span><br><span class="line">         &lt;el-form :model=&quot;permForm&quot; ref=&quot;permForm&quot;&gt;</span><br><span class="line">            &lt;el-tree</span><br><span class="line">                  :data=&quot;permTreeData&quot;</span><br><span class="line">                  show-checkbox</span><br><span class="line">                  ref=&quot;permTree&quot;</span><br><span class="line">                  :check-strictly=checkStrictly</span><br><span class="line">                  node-key=&quot;id&quot;</span><br><span class="line">                  :default-expand-all=true</span><br><span class="line">                  :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">            &lt;/el-tree&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br><span class="line">         &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">            &lt;el-button @click=&quot;resetForm(&#x27;permForm&#x27;)&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;submitPermForm(&#x27;permForm&#x27;)&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;Role&quot;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         return &#123;</span><br><span class="line">            searchForm: &#123;</span><br><span class="line">               name: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            tableData: [],</span><br><span class="line">            multipleSelection: [],</span><br><span class="line">            dialogFormVisible: false,</span><br><span class="line">            permDialogFormVisible: false,</span><br><span class="line">            delBtnStu: true,</span><br><span class="line">            current: 1,</span><br><span class="line">            total: 0,</span><br><span class="line">            size: 10,</span><br><span class="line">            editForm: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            editFormRules: &#123;</span><br><span class="line">               name: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入名称&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               code: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入唯一编码&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               statu: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请选择状态&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ]</span><br><span class="line">            &#125;,</span><br><span class="line">            permForm: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            defaultProps: &#123;</span><br><span class="line">               children: &#x27;children&#x27;,</span><br><span class="line">               label: &#x27;name&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            permTreeData:  [],</span><br><span class="line">            treeCheckedKeys: [],</span><br><span class="line">            checkStrictly: true</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">         toggleSelection(rows) &#123;</span><br><span class="line">            if (rows) &#123;</span><br><span class="line">               rows.forEach(row =&gt; &#123;</span><br><span class="line">                  this.$refs.multipleTable.toggleRowSelection(row);</span><br><span class="line">               &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">               this.$refs.multipleTable.clearSelection();</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         handleSelectionChange(val) &#123;</span><br><span class="line">            this.multipleSelection = val;</span><br><span class="line">            this.delBtnStu = val.length == 0</span><br><span class="line">         &#125;,</span><br><span class="line">         getRoleList() &#123;</span><br><span class="line">            this.$axios.get(&#x27;/sys/role/list&#x27;, &#123;</span><br><span class="line">               params: &#123;</span><br><span class="line">                  name: this.searchForm.name,</span><br><span class="line">                  current: this.current,</span><br><span class="line">                  size: this.size</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;).then(res =&gt; &#123;</span><br><span class="line">               this.tableData = res.data.data.records</span><br><span class="line">               this.current = res.data.data.current</span><br><span class="line">               this.size = res.data.data.size</span><br><span class="line">               this.total = res.data.data.total</span><br><span class="line">               console.log(res)</span><br><span class="line">            &#125;)</span><br><span class="line">            this.$axios.get(&quot;/sys/menu/list&quot;).then(res =&gt; &#123;</span><br><span class="line">               this.permTreeData = res.data.data</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         handleSizeChange(val) &#123;</span><br><span class="line">            this.size = val</span><br><span class="line">            this.getRoleList()</span><br><span class="line">         &#125;,</span><br><span class="line">         handleCurrentChange(val) &#123;</span><br><span class="line">            this.current = val</span><br><span class="line">            this.getRoleList()</span><br><span class="line">         &#125;,</span><br><span class="line">         submitEditForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].validate((valid) =&gt; &#123;</span><br><span class="line">               if (valid) &#123;</span><br><span class="line">                  this.$axios.post(&#x27;/sys/role/&#x27; + (this.editForm.id? &quot;update&quot; : &quot;save&quot;) ,this.editForm)</span><br><span class="line">                     .then(res =&gt; &#123;</span><br><span class="line">                        console.log(res.data)</span><br><span class="line">                        this.resetForm(formName)</span><br><span class="line">                        this.$message(&#123;</span><br><span class="line">                           showClose: true,</span><br><span class="line">                           message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                           type: &#x27;success&#x27;,</span><br><span class="line">                           onClose: () =&gt; &#123;</span><br><span class="line">                              this.getRoleList()</span><br><span class="line">                           &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                     &#125;)</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                  console.log(&#x27;error submit!!&#x27;);</span><br><span class="line">                  return false;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;,</span><br><span class="line">         editHandle(id) &#123;</span><br><span class="line">            console.log(id)</span><br><span class="line">            this.$axios.get(&quot;/sys/role/info/&quot; + id).then(res =&gt; &#123;</span><br><span class="line">               this.editForm = res.data.data</span><br><span class="line">               this.dialogFormVisible = true</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         delHandle(id) &#123;</span><br><span class="line">            console.log(id)</span><br><span class="line">            var ids = []</span><br><span class="line">            console.log(id ? 31:32)</span><br><span class="line">            id ? ids.push(id) : this.multipleSelection.forEach(row =&gt; &#123;</span><br><span class="line">               ids.push(row.id)</span><br><span class="line">            &#125;)</span><br><span class="line">            console.log(ids)</span><br><span class="line">            this.$axios.post(&quot;/sys/role/delete&quot;, ids).then(res =&gt; &#123;</span><br><span class="line">               console.log(res)</span><br><span class="line">               this.$message(&#123;</span><br><span class="line">                  showClose: true,</span><br><span class="line">                  message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                  type: &#x27;success&#x27;,</span><br><span class="line">                  onClose: () =&gt; &#123;</span><br><span class="line">                     this.getRoleList()</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         resetForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].resetFields();</span><br><span class="line">            this.editForm = &#123;&#125;</span><br><span class="line">            this.dialogFormVisible = false</span><br><span class="line">            this.permDialogFormVisible = false</span><br><span class="line">         &#125;,</span><br><span class="line">         permHandle(id) &#123;</span><br><span class="line">            this.permDialogFormVisible = true</span><br><span class="line">            this.$axios.get(&quot;/sys/role/info/&quot; + id).then(res =&gt; &#123;</span><br><span class="line">               this.$refs.permTree.setCheckedKeys(res.data.data.menuIds);</span><br><span class="line">               this.permForm = res.data.data</span><br><span class="line">               console.log(&quot;this.treeCheckedKeys&quot;)</span><br><span class="line">               console.log(this.treeCheckedKeys)</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         submitPermForm(formName) &#123;</span><br><span class="line">            var menuIds = []</span><br><span class="line">            menuIds = this.$refs.permTree.getCheckedKeys()</span><br><span class="line">            // menuIds = menuIds.concat(this.$refs.permTree.getHalfCheckedKeys()) // 半选中状态的父节点</span><br><span class="line">            console.log(menuIds)</span><br><span class="line">            console.log(this.permForm.id)</span><br><span class="line">            this.$axios.post(&quot;/sys/role/perm/&quot; + this.permForm.id, menuIds).then(res =&gt; &#123;</span><br><span class="line">               this.$message(&#123;</span><br><span class="line">                  showClose: true,</span><br><span class="line">                  message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                  type: &#x27;success&#x27;,</span><br><span class="line">                  onClose: () =&gt; &#123;</span><br><span class="line">                     this.resetForm(formName)</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">               this.permDialogFormVisible = false</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">         this.getRoleList()</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="14-用户界面"><a href="#14-用户界面" class="headerlink" title="14. 用户界面"></a>14. 用户界面</h2><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/20210423/0ee3a701e0584acba0aebed3936be4ad.png" alt="图片"></p>
<p>线上演示：<a target="_blank" rel="noopener" href="https://www.markerhub.com/vueadmin/">https://www.markerhub.com/vueadmin/</a></p>
<p>用户管理有个操作叫分配角色，和角色添加权限差不多的操作</p>
<p>贴代码啦：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">   &lt;div&gt;</span><br><span class="line">      &lt;!--搜索框--&gt;</span><br><span class="line">      &lt;el-form :inline=&quot;true&quot; :model=&quot;searchForm&quot;&gt;</span><br><span class="line">         &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-input</span><br><span class="line">                  v-model=&quot;searchForm.username&quot;</span><br><span class="line">                  placeholder=&quot;名称&quot;</span><br><span class="line">                  clearable&gt;</span><br><span class="line">            &lt;/el-input&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">         &lt;el-form-item&gt;</span><br><span class="line">            &lt;el-button&gt;搜索&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = true&quot; v-if=&quot;hasAuth(&#x27;sys:user:save&#x27;)&quot;&gt;新增&lt;/el-button&gt;</span><br><span class="line">            &lt;el-popconfirm title=&quot;确定要删除这些记录吗？&quot; @confirm=&quot;delHandle(null)&quot; style=&quot;margin-left: 10px;&quot; v-if=&quot;hasAuth(&#x27;sys:user:delete&#x27;)&quot;&gt;</span><br><span class="line">               &lt;el-button type=&quot;danger&quot; slot=&quot;reference&quot; :disabled=&quot;delBtnStu&quot;&gt;批量删除&lt;/el-button&gt;</span><br><span class="line">            &lt;/el-popconfirm&gt;</span><br><span class="line">         &lt;/el-form-item&gt;</span><br><span class="line">      &lt;/el-form&gt;</span><br><span class="line">      &lt;!--列表--&gt;</span><br><span class="line">      &lt;el-table</span><br><span class="line">            ref=&quot;multipleTable&quot;</span><br><span class="line">            border</span><br><span class="line">            stripe</span><br><span class="line">            :data=&quot;tableData&quot;</span><br><span class="line">            tooltip-effect=&quot;dark&quot;</span><br><span class="line">            style=&quot;width: 100%&quot;</span><br><span class="line">            @selection-change=&quot;handleSelectionChange&quot;&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               type=&quot;selection&quot;</span><br><span class="line">               width=&quot;55&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               label=&quot;头像&quot;</span><br><span class="line">               width=&quot;50&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-avatar size=&quot;small&quot;</span><br><span class="line">                          :src=&quot;scope.row.avatar&quot;&gt;&lt;/el-avatar&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;username&quot;</span><br><span class="line">               label=&quot;用户名&quot;</span><br><span class="line">               width=&quot;120&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               label=&quot;角色名称&quot;</span><br><span class="line">               width=&quot;180&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-tag style=&quot;margin-right: 5px;&quot; size=&quot;small&quot; type=&quot;info&quot; v-for=&quot;item in scope.row.roles&quot;&gt;&#123;&#123;item.name&#125;&#125;&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;email&quot;</span><br><span class="line">               label=&quot;邮箱&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;phone&quot;</span><br><span class="line">               label=&quot;手机号&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               label=&quot;状态&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-tag v-if=&quot;scope.row.statu === 0&quot; size=&quot;small&quot; type=&quot;danger&quot;&gt;禁用&lt;/el-tag&gt;</span><br><span class="line">               &lt;el-tag v-else-if=&quot;scope.row.statu === 1&quot; size=&quot;small&quot; type=&quot;success&quot;&gt;正常&lt;/el-tag&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               prop=&quot;created&quot;</span><br><span class="line">               label=&quot;创建时间&quot;</span><br><span class="line">               width=&quot;200&quot;&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">         &lt;el-table-column</span><br><span class="line">               width=&quot;260px&quot;</span><br><span class="line">               label=&quot;操作&quot;&gt;</span><br><span class="line">            &lt;template slot-scope=&quot;scope&quot;&gt;</span><br><span class="line">               &lt;el-button type=&quot;text&quot; @click=&quot;roleHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:user:role&#x27;)&quot;&gt;分配角色&lt;/el-button&gt;</span><br><span class="line">               &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">               &lt;el-button type=&quot;text&quot; @click=&quot;repassHandle(scope.row.id, scope.row.username)&quot; v-if=&quot;hasAuth(&#x27;sys:user:repass&#x27;)&quot;&gt;重置密码&lt;/el-button&gt;</span><br><span class="line">               &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">               &lt;el-button type=&quot;text&quot; @click=&quot;editHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:user:update&#x27;)&quot;&gt;编辑&lt;/el-button&gt;</span><br><span class="line">               &lt;el-divider direction=&quot;vertical&quot;&gt;&lt;/el-divider&gt;</span><br><span class="line">               &lt;el-popconfirm title=&quot;确定要删除这条记录吗？&quot; @confirm=&quot;delHandle(scope.row.id)&quot; v-if=&quot;hasAuth(&#x27;sys:user:delete&#x27;)&quot;&gt;</span><br><span class="line">                  &lt;el-button type=&quot;text&quot; slot=&quot;reference&quot;&gt;删除&lt;/el-button&gt;</span><br><span class="line">               &lt;/el-popconfirm&gt;</span><br><span class="line">            &lt;/template&gt;</span><br><span class="line">         &lt;/el-table-column&gt;</span><br><span class="line">      &lt;/el-table&gt;</span><br><span class="line">      &lt;!--页码--&gt;</span><br><span class="line">      &lt;el-pagination</span><br><span class="line">            @size-change=&quot;handleSizeChange&quot;</span><br><span class="line">            @current-change=&quot;handleCurrentChange&quot;</span><br><span class="line">            :current-page=&quot;current&quot;</span><br><span class="line">            :page-sizes=&quot;[10, 20, 50, 100]&quot;</span><br><span class="line">            :page-size=&quot;size&quot;</span><br><span class="line">            layout=&quot;total, sizes, prev, pager, next, jumper&quot;</span><br><span class="line">            :total=&quot;total&quot;&gt;</span><br><span class="line">      &lt;/el-pagination&gt;</span><br><span class="line">      &lt;el-dialog title=&quot;用户信息&quot; :visible.sync=&quot;dialogFormVisible&quot; width=&quot;600px&quot;&gt;</span><br><span class="line">         &lt;el-form :model=&quot;editForm&quot; :rules=&quot;editFormRules&quot; ref=&quot;editForm&quot;&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;用户名&quot; prop=&quot;username&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.username&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">               &lt;el-alert</span><br><span class="line">                     title=&quot;初始密码为888888&quot;</span><br><span class="line">                     :closable=&quot;false&quot;</span><br><span class="line">                     type=&quot;info&quot;</span><br><span class="line">                     style=&quot;line-height: 12px;&quot;</span><br><span class="line">               &gt;&lt;/el-alert&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;邮箱&quot;  prop=&quot;email&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.email&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;手机号&quot;  prop=&quot;phone&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-input v-model=&quot;editForm.phone&quot; autocomplete=&quot;off&quot;&gt;&lt;/el-input&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">            &lt;el-form-item label=&quot;状态&quot;  prop=&quot;statu&quot; label-width=&quot;100px&quot;&gt;</span><br><span class="line">               &lt;el-radio-group v-model=&quot;editForm.statu&quot;&gt;</span><br><span class="line">                  &lt;el-radio :label=&quot;0&quot;&gt;禁用&lt;/el-radio&gt;</span><br><span class="line">                  &lt;el-radio :label=&quot;1&quot;&gt;正常&lt;/el-radio&gt;</span><br><span class="line">               &lt;/el-radio-group&gt;</span><br><span class="line">            &lt;/el-form-item&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br><span class="line">         &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">            &lt;el-button @click=&quot;resetForm(&#x27;editForm&#x27;)&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;submitEditForm(&#x27;editForm&#x27;)&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line">      &lt;!-- 分配权限对话框 --&gt;</span><br><span class="line">      &lt;el-dialog title=&quot;分配角色&quot; :visible.sync=&quot;roleDialogFormVisible&quot; width=&quot;600px&quot; @closed=&quot;resetForm(&#x27;roleForm&#x27;)&quot;&gt;</span><br><span class="line">         &lt;el-form :model=&quot;roleForm&quot; ref=&quot;roleForm&quot;&gt;</span><br><span class="line">            &lt;el-tree</span><br><span class="line">                  :data=&quot;roleTreeData&quot;</span><br><span class="line">                  show-checkbox</span><br><span class="line">                  ref=&quot;roleTree&quot;</span><br><span class="line">                  node-key=&quot;id&quot;</span><br><span class="line">                  :default-expand-all=true</span><br><span class="line">                  :props=&quot;defaultProps&quot;&gt;</span><br><span class="line">            &lt;/el-tree&gt;</span><br><span class="line">         &lt;/el-form&gt;</span><br><span class="line">         &lt;div slot=&quot;footer&quot; class=&quot;dialog-footer&quot;&gt;</span><br><span class="line">            &lt;el-button @click=&quot;resetForm(&#x27;roleForm&#x27;)&quot;&gt;取 消&lt;/el-button&gt;</span><br><span class="line">            &lt;el-button type=&quot;primary&quot; @click=&quot;submitRoleForm(&#x27;roleForm&#x27;)&quot;&gt;确 定&lt;/el-button&gt;</span><br><span class="line">         &lt;/div&gt;</span><br><span class="line">      &lt;/el-dialog&gt;</span><br><span class="line">   &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">   export default &#123;</span><br><span class="line">      name: &quot;User&quot;,</span><br><span class="line">      data() &#123;</span><br><span class="line">         return &#123;</span><br><span class="line">            searchForm: &#123;</span><br><span class="line">               username: &#x27;&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            editForm: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            editFormRules: &#123;</span><br><span class="line">               username: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入用户名称&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               email: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请输入邮箱&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ],</span><br><span class="line">               statu: [</span><br><span class="line">                  &#123;required: true, message: &#x27;请选择状态&#x27;, trigger: &#x27;blur&#x27;&#125;</span><br><span class="line">               ]</span><br><span class="line">            &#125;,</span><br><span class="line">            current: 1,</span><br><span class="line">            total: 0,</span><br><span class="line">            size: 10,</span><br><span class="line">            dialogFormVisible: false,</span><br><span class="line">            tableData: [],</span><br><span class="line">            multipleSelection: [],</span><br><span class="line">            delBtnStu: true,</span><br><span class="line">            roleDialogFormVisible: false,</span><br><span class="line">            roleForm: &#123;</span><br><span class="line">            &#125;,</span><br><span class="line">            defaultProps: &#123;</span><br><span class="line">               children: &#x27;children&#x27;,</span><br><span class="line">               label: &#x27;name&#x27;</span><br><span class="line">            &#125;,</span><br><span class="line">            roleTreeData:  [],</span><br><span class="line">            treeCheckedKeys: [],</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      methods: &#123;</span><br><span class="line">         toggleSelection(rows) &#123;</span><br><span class="line">            if (rows) &#123;</span><br><span class="line">               rows.forEach(row =&gt; &#123;</span><br><span class="line">                  this.$refs.multipleTable.toggleRowSelection(row);</span><br><span class="line">               &#125;);</span><br><span class="line">            &#125; else &#123;</span><br><span class="line">               this.$refs.multipleTable.clearSelection();</span><br><span class="line">            &#125;</span><br><span class="line">         &#125;,</span><br><span class="line">         handleSelectionChange(rows) &#123;</span><br><span class="line">            this.multipleSelection = rows;</span><br><span class="line">            this.delBtnStu = rows.length == 0</span><br><span class="line">         &#125;,</span><br><span class="line">         getUserList() &#123;</span><br><span class="line">            this.$axios.get(&#x27;/sys/user/list&#x27;, &#123;</span><br><span class="line">               params: &#123;</span><br><span class="line">                  name: this.searchForm.name,</span><br><span class="line">                  current: this.current,</span><br><span class="line">                  size: this.size</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;).then(res =&gt; &#123;</span><br><span class="line">               this.tableData = res.data.data.records</span><br><span class="line">               this.current = res.data.data.current</span><br><span class="line">               this.size = res.data.data.size</span><br><span class="line">               this.total = res.data.data.total</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         handleSizeChange(val) &#123;</span><br><span class="line">            this.size = val</span><br><span class="line">            this.getUserList()</span><br><span class="line">         &#125;,</span><br><span class="line">         handleCurrentChange(val) &#123;</span><br><span class="line">            this.current = val</span><br><span class="line">            this.getUserList()</span><br><span class="line">         &#125;,</span><br><span class="line">         submitEditForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].validate((valid) =&gt; &#123;</span><br><span class="line">               if (valid) &#123;</span><br><span class="line">                  this.$axios.post(&#x27;/sys/user/&#x27; + (this.editForm.id? &quot;update&quot; : &quot;save&quot;) ,this.editForm)</span><br><span class="line">                     .then(res =&gt; &#123;</span><br><span class="line">                        console.log(res.data)</span><br><span class="line">                        this.resetForm(formName)</span><br><span class="line">                        this.$message(&#123;</span><br><span class="line">                           showClose: true,</span><br><span class="line">                           message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                           type: &#x27;success&#x27;,</span><br><span class="line">                           onClose: () =&gt; &#123;</span><br><span class="line">                              this.getUserList()</span><br><span class="line">                           &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                     &#125;)</span><br><span class="line">               &#125; else &#123;</span><br><span class="line">                  console.log(&#x27;error submit!!&#x27;);</span><br><span class="line">                  return false;</span><br><span class="line">               &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">         &#125;,</span><br><span class="line">         editHandle(id) &#123;</span><br><span class="line">            console.log(id)</span><br><span class="line">            this.$axios.get(&quot;/sys/user/info/&quot; + id).then(res =&gt; &#123;</span><br><span class="line">               this.editForm = res.data.data</span><br><span class="line">               this.dialogFormVisible = true</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         delHandle(id) &#123;</span><br><span class="line">            var ids = []</span><br><span class="line">            id ? ids.push(id) : this.multipleSelection.forEach(row =&gt; &#123;</span><br><span class="line">               ids.push(row.id)</span><br><span class="line">            &#125;)</span><br><span class="line">            console.log(ids)</span><br><span class="line">            this.$axios.post(&quot;/sys/user/delete&quot;, ids).then(res =&gt; &#123;</span><br><span class="line">               this.$message(&#123;</span><br><span class="line">                  showClose: true,</span><br><span class="line">                  message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                  type: &#x27;success&#x27;,</span><br><span class="line">                  onClose: () =&gt; &#123;</span><br><span class="line">                     this.getUserList()</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         resetForm(formName) &#123;</span><br><span class="line">            this.$refs[formName].resetFields();</span><br><span class="line">            this.editForm = &#123;&#125;</span><br><span class="line">            this.dialogFormVisible = false</span><br><span class="line">            this.roleDialogFormVisible = false</span><br><span class="line">         &#125;,</span><br><span class="line">         roleHandle(id) &#123;</span><br><span class="line">            this.$axios.get(&quot;/sys/user/info/&quot; + id).then(res =&gt; &#123;</span><br><span class="line">               const sysuser = res.data.data</span><br><span class="line">               var roleIds = []</span><br><span class="line">               sysuser.roles.forEach(row =&gt; &#123;</span><br><span class="line">                  roleIds.push(row.id)</span><br><span class="line">               &#125;)</span><br><span class="line">               console.log(&quot;roleIds&quot;)</span><br><span class="line">               console.log(roleIds)</span><br><span class="line">               this.roleForm = res.data.data</span><br><span class="line">               console.log(&quot;this.treeCheckedKeys&quot;)</span><br><span class="line">               console.log(this.treeCheckedKeys)</span><br><span class="line">               this.$axios.get(&quot;/sys/role/list&quot;).then(res =&gt; &#123;</span><br><span class="line">                  this.roleTreeData = res.data.data.records</span><br><span class="line">                  this.$refs.roleTree.setCheckedKeys(roleIds);</span><br><span class="line">               &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">            this.roleDialogFormVisible = true</span><br><span class="line">         &#125;,</span><br><span class="line">         submitRoleForm(formName) &#123;</span><br><span class="line">            var roleIds = []</span><br><span class="line">            roleIds = this.$refs.roleTree.getCheckedKeys()</span><br><span class="line">            console.log(roleIds)</span><br><span class="line">            console.log(this.roleForm.id)</span><br><span class="line">            this.$axios.post(&quot;/sys/user/role/&quot; + this.roleForm.id, roleIds).then(res =&gt; &#123;</span><br><span class="line">               this.$message(&#123;</span><br><span class="line">                  showClose: true,</span><br><span class="line">                  message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                  type: &#x27;success&#x27;,</span><br><span class="line">                  onClose: () =&gt; &#123;</span><br><span class="line">                     this.resetForm(formName)</span><br><span class="line">                     this.getUserList()</span><br><span class="line">                  &#125;</span><br><span class="line">               &#125;);</span><br><span class="line">               this.roleDialogFormVisible = false</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;,</span><br><span class="line">         repassHandle(id, username) &#123;</span><br><span class="line">            this.$confirm(&#x27;将重置用户【&#x27; + username + &#x27;】的密码, 是否继续?&#x27;, &#x27;提示&#x27;, &#123;</span><br><span class="line">               confirmButtonText: &#x27;确定&#x27;,</span><br><span class="line">               cancelButtonText: &#x27;取消&#x27;,</span><br><span class="line">               type: &#x27;warning&#x27;</span><br><span class="line">            &#125;).then(() =&gt; &#123;</span><br><span class="line">               this.$axios.post(&quot;/sys/user/repass&quot;, id).then(res =&gt; &#123;</span><br><span class="line">                  this.$message(&#123;</span><br><span class="line">                     showClose: true,</span><br><span class="line">                     message: &#x27;恭喜你，操作成功&#x27;,</span><br><span class="line">                     type: &#x27;success&#x27;,</span><br><span class="line">                     onClose: () =&gt; &#123;</span><br><span class="line">                     &#125;</span><br><span class="line">                  &#125;);</span><br><span class="line">               &#125;)</span><br><span class="line">            &#125;)</span><br><span class="line">         &#125;</span><br><span class="line">      &#125;,</span><br><span class="line">      created() &#123;</span><br><span class="line">         this.getUserList()</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<h2 id="15-按钮权限的控制"><a href="#15-按钮权限的控制" class="headerlink" title="15. 按钮权限的控制"></a>15. 按钮权限的控制</h2><p>上面的菜单、角色、用户有增删改查操作，但是不是每个用户都有权限的，没权限的用户我们应该隐藏按钮，因此我们需要通过条件来判断按钮是否应该显示，那么应该怎么定义一个方法可以让全局都能使用呢？</p>
<p>我们再src下面新建一个js文件用于定义一个全局使用的方法：</p>
<ul>
<li>src&#x2F;globalFun.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">import Vue from &#x27;vue&#x27;</span><br><span class="line">Vue.mixin(&#123;</span><br><span class="line">   methods: &#123;</span><br><span class="line">      hasAuth(perm) &#123;</span><br><span class="line">         var authority = this.$store.state.menus.permList</span><br><span class="line">         console.log(authority)</span><br><span class="line">         return authority.indexOf(perm) &gt; -1</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>之前我们在加载菜单的时候说过，我们同时要加载权限数据，现在就需要用到权限数据了，这里数组，因此我们通过按钮的权限是否在所有权限列表内就行了。<br>mixin的作用是多个组件可以共享数据和方法，在使用mixin的组件中引入后，mixin中的方法和属性也就并入到该组件中，可以直接使用，在已有的组件数据和方法进行了扩充。引入mixin分全局引用和局部引用。</p>
<p>然后我们需要在main.js中引入这个文件</p>
<ul>
<li>src\main.js</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import gobal from &quot;./globalFun&quot;</span><br></pre></td></tr></table></figure>

<p>这样全局就可以使用啦，比如我们在新增按钮这里做判断：</p>
<ul>
<li>src&#x2F;views&#x2F;sys&#x2F;Menu.vue</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;el-button type=&quot;primary&quot; @click=&quot;dialogFormVisible = true&quot; v-if=&quot;hasAuth(&#x27;sys:menu:save&#x27;)&quot;&gt;新增&lt;/el-button&gt;</span><br></pre></td></tr></table></figure>

<p>通过v-if来判断返回是否为true从而判断是否显示。</p>
<h2 id="16-结束语"><a href="#16-结束语" class="headerlink" title="16. 结束语"></a>16. 结束语</h2><p>视频讲解：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1af4y1s7Wh/">https://www.bilibili.com/video/BV1af4y1s7Wh/</a></p>
<p>线上演示：<a target="_blank" rel="noopener" href="https://www.markerhub.com/vueadmin/">https://www.markerhub.com/vueadmin/</a></p>
<p>首发公众号：MarkerHub</p>
<p>撰写人：吕一明</p>
<p>转载请保留此声明，感谢！</p>
<p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/tag/vueadmin/">#vueadmin</a> <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/tag/%E5%90%8E%E5%8F%B0%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F/">#后台管理系统</a> <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/tag/%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB/">#前后端分离</a> <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/tag/springboot%E9%A1%B9%E7%9B%AE/">#springboot项目</a></p>
<h4 id="全部评论-14-条"><a href="#全部评论-14-条" class="headerlink" title="全部评论: 14 条"></a>全部评论: 14 条</h4><ul>
<li><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg" alt="img"></p>
<h5 id="Hub-riaqw2022-06-21"><a href="#Hub-riaqw2022-06-21" class="headerlink" title="Hub-riaqw2022-06-21"></a><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/10846">Hub-riaqw</a>2022-06-21</h5><p>ヾ(≧∇≦*)ゝ</p>
</li>
<li><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg" alt="img"></p>
<h5 id="Hub-1uqwj2022-06-09"><a href="#Hub-1uqwj2022-06-09" class="headerlink" title="Hub-1uqwj2022-06-09"></a><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/10534">Hub-1uqwj</a>2022-06-09</h5><p>索多四类</p>
</li>
<li><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg" alt="img"></p>
<h5 id="Hub-atheo2022-05-17"><a href="#Hub-atheo2022-05-17" class="headerlink" title="Hub-atheo2022-05-17"></a><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/9878">Hub-atheo</a>2022-05-17</h5><p>不是基于 vue-element-templet开发的吗</p>
</li>
<li><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg" alt="img"></p>
<h5 id="Hub-dyfk02022-05-02"><a href="#Hub-dyfk02022-05-02" class="headerlink" title="Hub-dyfk02022-05-02"></a><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/5766">Hub-dyfk0</a>2022-05-02</h5><p>有没有源码</p>
</li>
<li><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg" alt="img"></p>
<h5 id="Hub-y1w162022-04-02"><a href="#Hub-y1w162022-04-02" class="headerlink" title="Hub-y1w162022-04-02"></a><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/6640">Hub-y1w16</a>2022-04-02</h5><p>看看资源管理器服务的redis开启没有</p>
<p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/6671">@Hub-qmfh9</a>: 为什么我下载了源码什么都配置好了 跨域去8081还是报错401 百度了都配好了 还是不行 求告知为什么</p>
</li>
<li><p><img src="https://image-1300566513.cos.ap-guangzhou.myqcloud.com/upload/images/5a9f48118166308daba8b6da7e466aab.jpg" alt="img"></p>
<h5 id="Hub-qmfh92022-03-20"><a href="#Hub-qmfh92022-03-20" class="headerlink" title="Hub-qmfh92022-03-20"></a><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/users/6671">Hub-qmfh9</a>2022-03-20</h5><p>为什么我下载了源码什么都配置好了 跨域去8081还是报错401 百度了都配好了 还是不行 求告知为什么</p>
</li>
<li><p><a href="javascript:void(0)">1</a></p>
</li>
<li><p><a href="javascript:void(0);">2</a></p>
</li>
<li><p><a href="javascript:void(0);">3</a></p>
</li>
<li><p><a href="javascript:void(0);">&gt;</a></p>
</li>
</ul>
<p>我有话说:</p>
<p>发送</p>
<p><strong>– 目录 –</strong></p>
<ul>
<li><p>[1. 前言](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#1">https://www.zhuawaba.com/post/18#1</a>. 前言)</p>
</li>
<li><p>[2. 安装vue环境，并新建Vue项目](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#2">https://www.zhuawaba.com/post/18#2</a>. 安装vue环境，并新建Vue项目)</p>
</li>
<li><p>[3. 安装element-ui](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#3">https://www.zhuawaba.com/post/18#3</a>. 安装element-ui)</p>
</li>
<li><p>[4. 安装axios、qs、mockjs](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#4">https://www.zhuawaba.com/post/18#4</a>. 安装axios、qs、mockjs)</p>
</li>
<li><p>[5. 页面路由](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#5">https://www.zhuawaba.com/post/18#5</a>. 页面路由)</p>
</li>
<li><p>\6. 登陆界面开发</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#%E7%99%BB%E5%BD%95%E4%BA%A4%E4%BA%92%E8%BF%87%E7%A8%8B">登录交互过程</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#token%E7%9A%84%E7%8A%B6%E6%80%81%E5%90%8C%E6%AD%A5">token的状态同步</a></li>
<li><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#%E5%AE%9A%E4%B9%89%E5%85%A8%E5%B1%80axios%E6%8B%A6%E6%88%AA%E5%99%A8">定义全局axios拦截器</a></li>
</ul>
</li>
<li><p>[7. 后台管理界面开发](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#7">https://www.zhuawaba.com/post/18#7</a>. 后台管理界面开发)</p>
</li>
<li><p>[8. 用户登录信息展示](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#8">https://www.zhuawaba.com/post/18#8</a>. 用户登录信息展示)</p>
</li>
<li><p>[9. 动态菜单栏开发](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#9">https://www.zhuawaba.com/post/18#9</a>. 动态菜单栏开发)</p>
</li>
<li><p>[10. 动态标签页开发](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#10">https://www.zhuawaba.com/post/18#10</a>. 动态标签页开发)</p>
</li>
<li><p>[11. 个人中心](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#11">https://www.zhuawaba.com/post/18#11</a>. 个人中心)</p>
</li>
<li><p>[12. 菜单界面](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#12">https://www.zhuawaba.com/post/18#12</a>. 菜单界面)</p>
</li>
<li><p>[13. 角色界面](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#13">https://www.zhuawaba.com/post/18#13</a>. 角色界面)</p>
</li>
<li><p>[14. 用户界面](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#14">https://www.zhuawaba.com/post/18#14</a>. 用户界面)</p>
</li>
<li><p>[15. 按钮权限的控制](<a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/18#15">https://www.zhuawaba.com/post/18#15</a>. 按钮权限的控制)</p>
</li>
<li><p>\16. 结束语</p>
</li>
<li><p><img src="https://www.zhuawaba.com/dist/images/logo/javawenda.jpg" alt="公众号：Java问答社"></p>
<p>关注官方公众号：<strong>Java问答社</strong></p>
<p>接收最新有赏问答推送！</p>
</li>
</ul>
<h3 id="最新发布"><a href="#最新发布" class="headerlink" title="最新发布"></a>最新发布</h3><ul>
<li><p>\1. <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/182">一个依赖搞定 Spring Boot 反爬虫，防止接口盗刷！</a></p>
</li>
<li></li>
<li><p>\2. <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/181">Java8 Stream 极大简化了代码，它是如何实现的？</a></p>
</li>
<li></li>
<li><p>\3. <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/180">马上大四了，秋招还是春招好？先找工作还是找实习？</a></p>
</li>
<li></li>
<li><p>\4. <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/179">万字详解 Linux 常用指令（值得收藏）</a></p>
</li>
<li></li>
<li><p>\5. <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/178">4年工作经验，多线程间的5种通信方式都说不出来，你敢信？</a></p>
</li>
<li></li>
<li><p>\6. <a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/177">40 个 常用的 SpringBoot 注解，你知道几个？</a></p>
</li>
</ul>
<h3 id="最新评论"><a href="#最新评论" class="headerlink" title="最新评论"></a>最新评论</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/124">已干完</a></p>
</li>
<li></li>
<li><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/19">为什么老是提示账号密码错误</a></p>
</li>
<li></li>
<li><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/17">redis起作用吗？开不开都能用，开了也没见往里面写值</a></p>
</li>
<li></li>
<li><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/124">怎么说，搞不搞</a></p>
</li>
<li></li>
<li><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/19">请问下这个退出功能是正常的吗OωO</a></p>
</li>
<li></li>
<li><p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/post/117">jar 能用，激活码需要从网上另找一个能用的</a></p>
</li>
</ul>
<p><a target="_blank" rel="noopener" href="https://www.zhuawaba.com/"><img src="https://www.zhuawaba.com/dist/images/logo/logo.png" alt="mblog"></a></p>
<p>Copyright © 广州码客科技有限公司</p>
<p><a target="_blank" rel="noopener" href="http://beian.miit.gov.cn/">粤ICP备19147782号</a></p>
<p>公众号：Java问答社</p>
<p>Powered by <a target="_blank" rel="noopener" href="https://github.com/langhsu/mblog">mblog</a></p>
<p><img src="https://www.zhuawaba.com/dist/images/logo/javawenda.jpg" alt="公众号：Java问答社"></p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        Author:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">John Doe</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        Link:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://example.com/2022/10/07/VueAdmin%E5%89%8D%E7%AB%AF/">http://example.com/2022/10/07/VueAdmin%E5%89%8D%E7%AB%AF/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        Reprint policy:
                    </i>
                </span>
                <span class="reprint-info">
                    All articles in this blog are used except for special statements
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    reprint polocy. If reproduced, please indicate source
                    <a href="/about" target="_blank">John Doe</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>Copied successfully, please follow the reprint policy of this article</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">more</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/VueAdmin%E5%89%8D%E7%AB%AF/">
                                    <span class="chip bg-color">VueAdmin前端</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="fas fa-chevron-left"></i>&nbsp;Previous</div>
            <div class="card">
                <a href="/2022/10/07/VueAdmin%E9%83%A8%E7%BD%B2/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/5.jpg" class="responsive-img" alt="VueAdmin部署">
                        
                        <span class="card-title">VueAdmin部署</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                        <span class="publish-date">
                            <i class="far fa-clock fa-fw icon-date"></i>2022-10-07
                        </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            John Doe
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/VueAdmin%E9%83%A8%E7%BD%B2/">
                        <span class="chip bg-color">VueAdmin部署</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                Next&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2022/10/07/VueAdmin%E5%90%8E%E7%AB%AF/">
                    <div class="card-image">
                        
                        
                        <img src="/medias/featureimages/22.jpg" class="responsive-img" alt="VueAdmin后端">
                        
                        <span class="card-title">VueAdmin后端</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2022-10-07
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-user fa-fw"></i>
                            John Doe
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/VueAdmin%E5%90%8E%E7%AB%AF/">
                        <span class="chip bg-color">VueAdmin后端</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    </div>
    <div id="toc-aside" class="expanded col l3 hide-on-med-and-down">
        <div class="toc-widget card" style="background-color: white;">
            <div class="toc-title"><i class="far fa-list-alt"></i>&nbsp;&nbsp;TOC</div>
            <div id="toc-content"></div>
        </div>
    </div>
</div>

<!-- TOC 悬浮按钮. -->

<div id="floating-toc-btn" class="hide-on-med-and-down">
    <a class="btn-floating btn-large bg-color">
        <i class="fas fa-list-ul"></i>
    </a>
</div>


<script src="/libs/tocbot/tocbot.min.js"></script>
<script>
    $(function () {
        tocbot.init({
            tocSelector: '#toc-content',
            contentSelector: '#articleContent',
            headingsOffset: -($(window).height() * 0.4 - 45),
            collapseDepth: Number('0'),
            headingSelector: 'h2, h3, h4'
        });

        // modify the toc link href to support Chinese.
        let i = 0;
        let tocHeading = 'toc-heading-';
        $('#toc-content a').each(function () {
            $(this).attr('href', '#' + tocHeading + (++i));
        });

        // modify the heading title id to support Chinese.
        i = 0;
        $('#articleContent').children('h2, h3, h4').each(function () {
            $(this).attr('id', tocHeading + (++i));
        });

        // Set scroll toc fixed.
        let tocHeight = parseInt($(window).height() * 0.4 - 64);
        let $tocWidget = $('.toc-widget');
        $(window).scroll(function () {
            let scroll = $(window).scrollTop();
            /* add post toc fixed. */
            if (scroll > tocHeight) {
                $tocWidget.addClass('toc-fixed');
            } else {
                $tocWidget.removeClass('toc-fixed');
            }
        });

        
        /* 修复文章卡片 div 的宽度. */
        let fixPostCardWidth = function (srcId, targetId) {
            let srcDiv = $('#' + srcId);
            if (srcDiv.length === 0) {
                return;
            }

            let w = srcDiv.width();
            if (w >= 450) {
                w = w + 21;
            } else if (w >= 350 && w < 450) {
                w = w + 18;
            } else if (w >= 300 && w < 350) {
                w = w + 16;
            } else {
                w = w + 14;
            }
            $('#' + targetId).width(w);
        };

        // 切换TOC目录展开收缩的相关操作.
        const expandedClass = 'expanded';
        let $tocAside = $('#toc-aside');
        let $mainContent = $('#main-content');
        $('#floating-toc-btn .btn-floating').click(function () {
            if ($tocAside.hasClass(expandedClass)) {
                $tocAside.removeClass(expandedClass).hide();
                $mainContent.removeClass('l9');
            } else {
                $tocAside.addClass(expandedClass).show();
                $mainContent.addClass('l9');
            }
            fixPostCardWidth('artDetail', 'prenext-posts');
        });
        
    });
</script>

    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>

    
    <div class="container row center-align" style="margin-bottom: 0px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2019-2022</span>
            
            <span id="year">2019</span>
            <a href="/about" target="_blank">John Doe</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
            
            
            
            
            
            <span id="busuanzi_container_site_pv">
                |&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;<span id="busuanzi_value_site_pv"
                    class="white-color"></span>&nbsp;次
            </span>
            
            
            <span id="busuanzi_container_site_uv">
                |&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;<span id="busuanzi_value_site_uv"
                    class="white-color"></span>&nbsp;人
            </span>
            
            <br>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/lilinzhi666/lilinzhi666.github.io" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:3427562614@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=3427562614" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 3427562614" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







    <a href="/atom.xml" class="tooltipped" target="_blank" data-tooltip="RSS 订阅" data-position="top" data-delay="50">
        <i class="fas fa-rss"></i>
    </a>

</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;Search</span>
            <input type="search" id="searchInput" name="s" placeholder="Please enter a search keyword"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

	
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"log":false,"pluginJsPath":"lib/","pluginModelPath":"assets/","pluginRootPath":"live2dw/","tagMode":false});</script></body>

</html>
